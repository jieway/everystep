<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js light">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Lab 1 (Chinese) - everystep</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="../../favicon.svg">
    <link rel="shortcut icon" href="../../favicon.png">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/general.css">
    <link rel="stylesheet" href="../../css/chrome.css">
    <link rel="stylesheet" href="../../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="../../fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../../highlight.css">
    <link rel="stylesheet" href="../../tomorrow-night.css">
    <link rel="stylesheet" href="../../ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    <link rel="stylesheet" href="../../theme/style.css">


</head>
<body>
    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "../../";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');
            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }
            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item affix "><a href="../../index.html">ç®€ä»‹</a></li><li class="chapter-item affix "><li class="part-title">ğŸ­ æ“ä½œç³»ç»Ÿ</li><li class="spacer"></li><li class="chapter-item "><a href="../../6.S081/0-summary.html"><strong aria-hidden="true">1.</strong> 6.S081</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../6.S081/1-lab1.html"><strong aria-hidden="true">1.1.</strong> Lab 1</a></li><li class="chapter-item "><a href="../../6.S081/2-lab2.html"><strong aria-hidden="true">1.2.</strong> Lab 2</a></li><li class="chapter-item "><a href="../../6.S081/3-lab3.html"><strong aria-hidden="true">1.3.</strong> Lab 3</a></li><li class="chapter-item "><a href="../../6.S081/4-lab4.html"><strong aria-hidden="true">1.4.</strong> Lab 4</a></li><li class="chapter-item "><a href="../../6.S081/5-lab5.html"><strong aria-hidden="true">1.5.</strong> Lab 5</a></li><li class="chapter-item "><a href="../../6.S081/6-lab6.html"><strong aria-hidden="true">1.6.</strong> Lab 6</a></li><li class="chapter-item "><a href="../../6.S081/7-lab7.html"><strong aria-hidden="true">1.7.</strong> Lab 7</a></li><li class="chapter-item "><a href="../../6.S081/8-lab8.html"><strong aria-hidden="true">1.8.</strong> Lab 8</a></li><li class="chapter-item "><a href="../../6.S081/9-lab9.html"><strong aria-hidden="true">1.9.</strong> Lab 9</a></li><li class="chapter-item "><a href="../../6.S081/10-lab10.html"><strong aria-hidden="true">1.10.</strong> Lab 10</a></li><li class="chapter-item "><a href="../../6.S081/11-lab11.html"><strong aria-hidden="true">1.11.</strong> Lab 11</a></li></ol></li><li class="chapter-item "><li class="part-title">ğŸš€ æ•°æ®åº“</li><li class="spacer"></li><li class="chapter-item "><a href="../../bitcask/index.html"><strong aria-hidden="true">2.</strong> ä»é›¶å®ç° BitCask å­˜å‚¨å¼•æ“</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.1.</strong> BitCask ç®€ä»‹</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.2.</strong> åˆ›å»º C++ é¡¹ç›®</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.3.</strong> æ•°æ®åœ¨å†…å­˜ä¸­</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.4.</strong> æ•°æ®åœ¨ç£ç›˜ä¸Š</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.5.</strong> BenchMark</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.6.</strong> å®ç°åˆå¹¶</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.7.</strong> å®ç°åƒåœ¾å›æ”¶</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.8.</strong> hintfile å®ç°</a></li><li class="chapter-item "><a href="../../bitcask/p1.html"><strong aria-hidden="true">2.9.</strong> å“ˆå¸Œè¡¨ä¼˜åŒ–ä¸ºå¤šçº¿ç¨‹</a></li><li class="chapter-item "><a href="../../bitcask/ch1.html"><strong aria-hidden="true">2.10.</strong> æ•°æ®åœ¨ç£ç›˜ä¸Šå¦‚ä½•å­˜æ”¾ï¼Ÿ</a></li><li class="chapter-item "><a href="../../bitcask/ch2.html"><strong aria-hidden="true">2.11.</strong> å­˜å‚¨å¼•æ“çš„æ¥å£è®¾è®¡</a></li><li class="chapter-item "><a href="../../bitcask/ch3.html"><strong aria-hidden="true">2.12.</strong> å®ç° Setã€Get</a></li><li class="chapter-item "><a href="../../bitcask/ch4.html"><strong aria-hidden="true">2.13.</strong> åˆ é™¤é€»è¾‘å’Œ Compact </a></li></ol></li><li class="chapter-item "><a href="../../abyssdb/p0.html"><strong aria-hidden="true">3.</strong> ä»é›¶å®ç°å…³ç³»å‹æ•°æ®åº“</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../abyssdb/p1.html"><strong aria-hidden="true">3.1.</strong> ä» Table å¼€å§‹</a></li><li class="chapter-item "><a href="../../abyssdb/p2.html"><strong aria-hidden="true">3.2.</strong> Part 2. å®ç° Tuple</a></li><li class="chapter-item "><a href="../../abyssdb/p3.html"><strong aria-hidden="true">3.3.</strong> Part 3. å®ç° Page</a></li><li class="chapter-item "><a href="../../abyssdb/p4.html"><strong aria-hidden="true">3.4.</strong> Part 4. å®ç° HeapFile</a></li><li class="chapter-item "><a href="../../abyssdb/p5.html"><strong aria-hidden="true">3.5.</strong> Part 5. å®ç° BufferPool</a></li><li class="chapter-item "><a href="../../abyssdb/p6.html"><strong aria-hidden="true">3.6.</strong> Part 6. æ”¯æŒ int å’Œ string ç­‰æ•°æ®ç±»å‹ã€‚</a></li><li class="chapter-item "><a href="../../abyssdb/p7.html"><strong aria-hidden="true">3.7.</strong> Part 7. å®ç° Catalog</a></li></ol></li><li class="chapter-item expanded "><a href="../../6.830/1-lab0.html"><strong aria-hidden="true">4.</strong> 6.830</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../6.830/ans/2-lab1-ans.html"><strong aria-hidden="true">4.1.</strong> Lab 1 Answers</a></li><li class="chapter-item "><a href="../../6.830/ans/3-lab2-ans.html"><strong aria-hidden="true">4.2.</strong> Lab 2 Answers</a></li><li class="chapter-item "><a href="../../6.830/ans/4-lab3-ans.html"><strong aria-hidden="true">4.3.</strong> Lab 3 Answers</a></li><li class="chapter-item "><a href="../../6.830/ans/5-lab4-ans.html"><strong aria-hidden="true">4.4.</strong> Lab 4 Answers</a></li><li class="chapter-item "><a href="../../6.830/ans/6-lab5-ans.html"><strong aria-hidden="true">4.5.</strong> Lab 5 Answers</a></li><li class="chapter-item "><a href="../../6.830/ans/7-lab6-ans.html"><strong aria-hidden="true">4.6.</strong> Lab 6 Answers</a></li><li class="chapter-item expanded "><a href="../../6.830/cn/2-lab1.html" class="active"><strong aria-hidden="true">4.7.</strong> Lab 1 (Chinese)</a></li><li class="chapter-item "><a href="../../6.830/cn/3-lab2.html"><strong aria-hidden="true">4.8.</strong> Lab 2 (Chinese)</a></li><li class="chapter-item "><a href="../../6.830/cn/4-lab3.html"><strong aria-hidden="true">4.9.</strong> Lab 3 (Chinese)</a></li><li class="chapter-item "><a href="../../6.830/cn/5-lab4.html"><strong aria-hidden="true">4.10.</strong> Lab 4 (Chinese)</a></li><li class="chapter-item "><a href="../../6.830/cn/6-lab5.html"><strong aria-hidden="true">4.11.</strong> Lab 5 (Chinese)</a></li><li class="chapter-item "><a href="../../6.830/cn/7-lab6.html"><strong aria-hidden="true">4.12.</strong> Lab 6 (Chinese)</a></li></ol></li><li class="chapter-item "><li class="part-title">ğŸ§Š åˆ†å¸ƒå¼</li><li class="spacer"></li><li class="chapter-item "><a href="../../6.824/0-lab0.html"><strong aria-hidden="true">5.</strong> 6.824</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../6.824/1-lab1-cn.html"><strong aria-hidden="true">5.1.</strong> Lab 1 (Chinese)</a></li><li class="chapter-item "><a href="../../6.824/1-lab1.html"><strong aria-hidden="true">5.2.</strong> Lab 1</a></li><li class="chapter-item "><a href="../../6.824/2-lab2-cn.html"><strong aria-hidden="true">5.3.</strong> Lab 2 (Chinese)</a></li><li class="chapter-item "><a href="../../6.824/2-lab2.html"><strong aria-hidden="true">5.4.</strong> Lab 2</a></li></ol></li><li class="chapter-item "><li class="part-title">ğŸ”¥ å…¶ä»–</li><li class="spacer"></li><li class="chapter-item "><a href="../../6.828/0-sum.html"><strong aria-hidden="true">6.</strong> 6.828</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../6.828/1-env.html"><strong aria-hidden="true">6.1.</strong> Environment Setup</a></li><li class="chapter-item "><a href="../../6.828/1-part1.html"><strong aria-hidden="true">6.2.</strong> Part 1</a></li></ol></li><li class="chapter-item "><a href="../../review/1_go.html"><strong aria-hidden="true">7.</strong> å…«è‚¡</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../review/2_cpp.html"><strong aria-hidden="true">7.1.</strong> C++</a></li><li class="chapter-item "><a href="../../review/3_cn.html"><strong aria-hidden="true">7.2.</strong> Computer Networks</a></li></ol></li><li class="chapter-item "><a href="../../lsm/index.html"><strong aria-hidden="true">8.</strong> ä»é›¶å®ç° LSM-Tree å­˜å‚¨å¼•æ“</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../lsm/ch1.html"><strong aria-hidden="true">8.1.</strong> Part 1</a></li><li class="chapter-item "><a href="../../lsm/ch2.html"><strong aria-hidden="true">8.2.</strong> Part 2</a></li><li class="chapter-item "><a href="../../lsm/ch3.html"><strong aria-hidden="true">8.3.</strong> Part 3</a></li><li class="chapter-item "><a href="../../lsm/ch4.html"><strong aria-hidden="true">8.4.</strong> Part 4</a></li></ol></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                    </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

                <h1 class="menu-title">everystep</h1>

                <div class="right-buttons">
                    <a href="../../print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/weijiew/everystep" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>
                    <a href="https://github.com/weijiew/everystep/edit/master/src/6.830/cn/2-lab1.md" title="Suggest an edit" aria-label="Suggest an edit">
                        <i id="git-edit-button" class="fa fa-edit"></i>
                    </a>

                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');

                // Get viewed page store
                var viewed_key = 'mdbook-viewed';
                var viewed_map = {};
                try {
                    var viewed_storage = localStorage.getItem(viewed_key);
                    if (viewed_storage) {
                        viewed_map = JSON.parse(viewed_storage)
                    }
                } catch (e) { }

                Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);

                    // Apply viewed style
                    if (viewed_map[link.pathname]) {
                        link.classList.add('md-viewed')
                    }
                }); 

                // Mark viewed after 30s
                setTimeout(function() {
                    viewed_map[location.pathname] = 1;
                    localStorage.setItem(viewed_key, JSON.stringify(viewed_map));
                }, 30000)
            </script>

            <div id="content" class="content">
                <!-- Page table of contents -->
                <div class="sidetoc"><nav class="pagetoc"></nav></div>
                <main>
                    <h1 id="lab-1-ç¿»è¯‘"><a class="header" href="#lab-1-ç¿»è¯‘">Lab 1 ç¿»è¯‘</a></h1>
<p><strong>Assigned: Wed, Feb 24</strong></p>
<p><strong>Due: Wed, Mar 10 11:59 PM EDT</strong></p>
<!--
**Bug Update:** We have a [page](bugs.html) to keep track
of SimpleDB bugs that you or we find. Fixes for bugs/annoyances will also be
posted there. Some bugs may have already been found, so do take a look at the page
to get the latest version/ patches for the lab code.
-->
<p>In the lab assignments in 6.830 you will write a basic database management system called SimpleDB. For this lab, you will focus on implementing the core modules required to access stored data on disk; in future labs, you will add support for various query processing operators, as well as transactions, locking, and concurrent queries.</p>
<p>åœ¨6.830çš„å®éªŒä½œä¸šä¸­ï¼Œä½ å°†ç¼–å†™ä¸€ä¸ªåä¸ºSimpleDBçš„åŸºæœ¬æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œä½ å°†ä¸“æ³¨äºå®ç°è®¿é—®ç£ç›˜ä¸Šå­˜å‚¨çš„æ•°æ®æ‰€éœ€çš„æ ¸å¿ƒæ¨¡å—ï¼›åœ¨æœªæ¥çš„å®éªŒä¸­ï¼Œä½ å°†å¢åŠ å¯¹å„ç§æŸ¥è¯¢å¤„ç†æ“ä½œç¬¦ä»¥åŠäº‹åŠ¡ã€é”å®šå’Œå¹¶å‘æŸ¥è¯¢çš„æ”¯æŒã€‚</p>
<p>SimpleDB is written in Java. We have provided you with a set of mostly unimplemented classes and interfaces. You will need to write the code for these classes. We will grade your code by running a set of system tests written using <a href="http://junit.sourceforge.net/">JUnit</a>. We have also provided a number of unit tests, which we will not use for grading but that you may find useful in verifying that your code works. We also encourage you to develop your own test suite in addition to our tests.</p>
<p>SimpleDBæ˜¯ç”¨Javaç¼–å†™çš„ã€‚æˆ‘ä»¬å·²ç»ä¸ºä½ æä¾›äº†ä¸€ç»„å¤§éƒ¨åˆ†æœªå®ç°çš„ç±»å’Œæ¥å£ã€‚ä½ å°†éœ€è¦ä¸ºè¿™äº›ç±»ç¼–å†™ä»£ç ã€‚æˆ‘ä»¬å°†é€šè¿‡è¿è¡Œä¸€ç»„ç”¨<a href="http://junit.sourceforge.net/">JUnit</a>ç¼–å†™çš„ç³»ç»Ÿæµ‹è¯•æ¥è¯„å®šä½ çš„ä»£ç ã€‚æˆ‘ä»¬è¿˜æä¾›äº†ä¸€äº›å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è¯„åˆ†ä¸­ä½¿ç”¨è¿™äº›æµ‹è¯•ï¼Œä½†ä½ å¯èƒ½ä¼šå‘ç°è¿™äº›æµ‹è¯•å¯¹éªŒè¯ä½ çš„ä»£ç æ˜¯å¦å·¥ä½œå¾ˆæœ‰ç”¨ã€‚æˆ‘ä»¬ä¹Ÿé¼“åŠ±ä½ åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¹‹å¤–ï¼Œå¼€å‘ä½ è‡ªå·±çš„æµ‹è¯•å¥—ä»¶ã€‚</p>
<p>The remainder of this document describes the basic architecture of SimpleDB, gives some suggestions about how to start coding, and discusses how to hand in your lab.</p>
<p>æœ¬æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†æè¿°äº†SimpleDBçš„åŸºæœ¬æ¶æ„ï¼Œç»™å‡ºäº†ä¸€äº›å…³äºå¦‚ä½•å¼€å§‹ç¼–ç çš„å»ºè®®ï¼Œå¹¶è®¨è®ºäº†å¦‚ä½•åœ¨å®éªŒä¸­äº¤æ¥ã€‚</p>
<p>We <strong>strongly recommend</strong> that you start as early as possible on this lab. It requires you to write a fair amount of code!</p>
<p>æˆ‘ä»¬***å¼ºçƒˆå»ºè®®ä½ å°½æ—©å¼€å§‹åšè¿™ä¸ªå®éªŒã€‚å®ƒéœ€è¦ä½ å†™ç›¸å½“æ•°é‡çš„ä»£ç !</p>
<!--

##  0.  Find bugs, be patient, earn candy bars 

SimpleDB is a relatively complex piece of code.
It is very possible you are going to find bugs, inconsistencies, and bad,
outdated, or incorrect documentation, etc.

We ask you, therefore, to do this lab with an adventurous mindset.  Don't get
mad if something is not clear, or even wrong; rather, try to figure it out
yourself or send us a friendly email.  We promise to help out by posting
bug fixes, new commits to the HW repo, etc., as bugs and issues are reported.

<p>...and if you find a bug in our code, we`ll give you a candy bar (see [Section 3.3](#bugs))!

-->
<!--which you can find [here](bugs.html).</p>-->
<h2 id="0-environment-setup"><a class="header" href="#0-environment-setup">0. Environment Setup</a></h2>
<p><strong>Start by downloading the code for lab 1 from the course GitHub repository by following the instructions <a href="https://github.com/MIT-DB-Class/simple-db-hw-2021">here</a>.</strong></p>
<p>é¦–å…ˆæŒ‰ç…§è¯´æ˜<a href="https://github.com/MIT-DB-Class/simple-db-hw-2021">è¿™é‡Œ</a>ä»è¯¾ç¨‹çš„GitHubèµ„æºåº“ä¸‹è½½å®éªŒ1çš„ä»£ç ã€‚</p>
<p>These instructions are written for Athena or any other Unix-based platform (e.g., Linux, MacOS, etc.)  Because the code is written in Java, it should work under Windows as well, although the directions in this document may not apply.</p>
<p>è¿™äº›è¯´æ˜æ˜¯ä¸ºAthenaæˆ–ä»»ä½•å…¶ä»–åŸºäºUnixçš„å¹³å°ï¼ˆå¦‚Linuxã€MacOSç­‰ï¼‰ç¼–å†™çš„ã€‚å› ä¸ºä»£ç æ˜¯ç”¨Javaç¼–å†™çš„ï¼Œæ‰€ä»¥åœ¨Windowsä¸‹ä¹Ÿåº”è¯¥å¯ä»¥å·¥ä½œï¼Œå°½ç®¡æœ¬æ–‡ä»¶ä¸­çš„è¯´æ˜å¯èƒ½ä¸é€‚ç”¨ã€‚</p>
<p>We have included <a href="#eclipse">Section 1.2</a> on using the project with Eclipse or IntelliJ.</p>
<p>æˆ‘ä»¬å·²ç»åŒ…æ‹¬äº†<a href="#eclipse">ç¬¬1.2èŠ‚</a>å…³äºç”¨Eclipseæˆ–IntelliJä½¿ç”¨è¯¥é¡¹ç›®ã€‚</p>
<h2 id="1-getting-started"><a class="header" href="#1-getting-started">1. Getting started</a></h2>
<p>SimpleDB uses the <a href="http://ant.apache.org/">Ant build tool</a> to compile the code and run tests. Ant is similar to <a href="http://www.gnu.org/software/make/manual/">make</a>, but the build file is written in XML and is somewhat better suited to Java code. Most modern Linux distributions include Ant. Under Athena, it is included in the <code>sipb</code> locker, which you can get to by typing <code>add sipb</code> at the Athena prompt. Note that on some versions of Athena you must also run <code>add -f java</code> to set the environment correctly for Java programs. See the <a href="http://web.mit.edu/acs/www/languages.html#Java">Athena documentation on using Java</a> for more details.</p>
<p>SimpleDBä½¿ç”¨<a href="http://ant.apache.org/">Antæ„å»ºå·¥å…·</a>æ¥ç¼–è¯‘ä»£ç å’Œè¿è¡Œæµ‹è¯•ã€‚Antç±»ä¼¼äº<a href="http://www.gnu.org/software/make/manual/">make</a>ï¼Œä½†æ„å»ºæ–‡ä»¶æ˜¯ç”¨XMLå†™çš„ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šæ›´é€‚åˆäºJavaä»£ç ã€‚å¤§å¤šæ•°ç°ä»£Linuxå‘è¡Œç‰ˆéƒ½åŒ…æ‹¬Antã€‚åœ¨Athenaä¸‹ï¼Œå®ƒè¢«åŒ…å«åœ¨<code>sipb</code>é”å­˜å™¨ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨Athenaæç¤ºç¬¦ä¸‹è¾“å…¥<code>add sipb</code>æ¥è·å¾—å®ƒã€‚æ³¨æ„ï¼Œåœ¨æŸäº›ç‰ˆæœ¬çš„Athenaä¸Šï¼Œä½ è¿˜å¿…é¡»è¿è¡Œ<code>add -f java</code>æ¥ä¸ºJavaç¨‹åºæ­£ç¡®è®¾ç½®ç¯å¢ƒã€‚æ›´å¤šç»†èŠ‚è§<a href="http://web.mit.edu/acs/www/languages.html#Java">Athenaä½¿ç”¨Javaçš„æ–‡æ¡£</a>ã€‚</p>
<p>To help you during development, we have provided a set of unit tests in addition to the end-to-end tests that we use for grading. These are by no means comprehensive, and you should not rely on them exclusively to verify the correctness of your project (put those 6.170 skills to use!).</p>
<p>ä¸ºäº†åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©ä½ ï¼Œé™¤äº†æˆ‘ä»¬ç”¨äºè¯„åˆ†çš„ç«¯åˆ°ç«¯æµ‹è¯•å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸€å¥—å•å…ƒæµ‹è¯•ã€‚è¿™äº›ç»ä¸æ˜¯å…¨é¢çš„ï¼Œä½ ä¸åº”è¯¥å®Œå…¨ä¾èµ–å®ƒä»¬æ¥éªŒè¯ä½ çš„é¡¹ç›®çš„æ­£ç¡®æ€§ï¼ˆæŠŠé‚£äº›6.170çš„æŠ€èƒ½ç”¨ä¸Šå§ï¼ï¼‰ã€‚</p>
<p>To run the unit tests use the <code>test</code> build target:</p>
<p>è¦è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œè¯·ä½¿ç”¨<code>test</code>æ„å»ºç›®æ ‡ã€‚</p>
<pre><code>$ cd [project-directory]
$ # run all unit tests
$ ant test
$ # run a specific unit test
$ ant runtest -Dtest=TupleTest
</code></pre>
<p>You should see output similar to:</p>
<p>ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºã€‚</p>
<pre><code> build output...

test:
    [junit] Running simpledb.CatalogTest
    [junit] Testsuite: simpledb.CatalogTest
    [junit] Tests run: 2, Failures: 0, Errors: 2, Time elapsed: 0.037 sec
    [junit] Tests run: 2, Failures: 0, Errors: 2, Time elapsed: 0.037 sec

 ... stack traces and error reports ...
</code></pre>
<p>The output above indicates that two errors occurred during compilation; this is because the code we have given you doesn't yet work. As you complete parts of the lab, you will work towards passing additional unit tests.</p>
<p>ä¸Šé¢çš„è¾“å‡ºè¡¨æ˜ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä¸¤ä¸ªé”™è¯¯ï¼›è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç»™ä½ çš„ä»£ç è¿˜ä¸èƒ½å·¥ä½œã€‚å½“ä½ å®Œæˆå®éªŒçš„éƒ¨åˆ†å†…å®¹æ—¶ï¼Œä½ å°†åŠªåŠ›é€šè¿‡é¢å¤–çš„å•å…ƒæµ‹è¯•ã€‚</p>
<p>If you wish to write new unit tests as you code, they should be added to the <tt>test simpledb</tt> directory.</p>
<p>å¦‚æœä½ å¸Œæœ›åœ¨ç¼–ç æ—¶ç¼–å†™æ–°çš„å•å…ƒæµ‹è¯•ï¼Œå®ƒä»¬åº”è¯¥è¢«æ·»åŠ åˆ°<tt>test simpledb</tt> catalog ã€‚</p>
<p>For more details about how to use Ant, see the [manual](http://ant.apache.org/manual/). The [Running Ant](http://ant.apache.org/manual/running.html) section provides details about using the `ant` command. However, the quick reference table below should be sufficient for working on the labs.
<p>å…³äºå¦‚ä½•ä½¿ç”¨Antçš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚é˜…[æ‰‹å†Œ](http://ant.apache.org/manual/)ã€‚è¿è¡ŒAnt](http://ant.apache.org/manual/running.html)éƒ¨åˆ†æä¾›äº†å…³äºä½¿ç”¨`ant`å‘½ä»¤çš„ç»†èŠ‚ã€‚ç„¶è€Œï¼Œä¸‹é¢çš„å¿«é€Ÿå‚è€ƒè¡¨åº”è¯¥è¶³ä»¥ç”¨äºå®éªŒçš„å·¥ä½œã€‚
<div class="table-wrapper"><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody>
<tr><td>ant</td><td>Build the default target (for simpledb, this is dist). æ„å»ºé»˜è®¤çš„ç›®æ ‡ï¼ˆå¯¹äºsimpledbï¼Œè¿™æ˜¯distï¼‰ã€‚</td></tr>
<tr><td>ant -projecthelp</td><td>List all the targets in <code>build.xml</code> with descriptions. åˆ—å‡º<code>build.xml</code>ä¸­çš„æ‰€æœ‰ç›®æ ‡å’Œæè¿°ã€‚</td></tr>
<tr><td>ant dist</td><td>Compile the code in src and package it in <code>dist/simpledb.jar</code>. ç¼–è¯‘srcä¸­çš„ä»£ç å¹¶å°†å…¶æ‰“åŒ…åˆ°<code>dist/simpledb.jar</code>ä¸­ã€‚</td></tr>
<tr><td>ant test</td><td>Compile and run all the unit tests. ç¼–è¯‘å¹¶è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ã€‚</td></tr>
<tr><td>ant runtest -Dtest=testname</td><td>Run the unit test named <code>testname</code>. è¿è¡Œåä¸º<code>testname</code>çš„å•å…ƒæµ‹è¯•ã€‚</td></tr>
<tr><td>ant systemtest</td><td>Compile and run all the system tests. ç¼–è¯‘å¹¶è¿è¡Œæ‰€æœ‰çš„ç³»ç»Ÿæµ‹è¯•ã€‚</td></tr>
<tr><td>ant runsystest -Dtest=testname</td><td>Compile and run the system test named <code>testname</code>. ç¼–è¯‘å¹¶è¿è¡Œåä¸º<code>testname</code>çš„ç³»ç»Ÿæµ‹è¯•ã€‚</td></tr>
</tbody></table>
</div>
<p>If you are under windows system and don't want to run ant tests from command line, you can also run them from eclipse. Right click build.xml, in the targets tab, you can see &quot;runtest&quot; &quot;runsystest&quot; etc. For example, select runtest would be equivalent to &quot;ant runtest&quot; from command line. Arguments such as &quot;-Dtest=testname&quot; can be specified in the &quot;Main&quot; Tab, &quot; Arguments&quot; textbox. Note that you can also create a shortcut to runtest by copying from build.xml, modifying targets and arguments and renaming it to, say, runtest_build.xml.</p>
<p>å¦‚æœä½ åœ¨windowsç³»ç»Ÿä¸‹ï¼Œä¸æƒ³ä»å‘½ä»¤è¡Œè¿è¡Œantæµ‹è¯•ï¼Œä½ ä¹Ÿå¯ä»¥ä»eclipseè¿è¡Œå®ƒä»¬ã€‚å³å‡»build.xmlï¼Œåœ¨targetæ ‡ç­¾ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° &quot;runtest&quot;&quot;runystest &quot;ç­‰ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©runtestå°±ç›¸å½“äºä»å‘½ä»¤è¡Œä¸­çš„ &quot;ant runtest&quot;ã€‚è¯¸å¦‚&quot;-Dtest=testname &quot;è¿™æ ·çš„å‚æ•°å¯ä»¥åœ¨ &quot;ä¸» &quot;æ ‡ç­¾çš„ &quot;å‚æ•° &quot;æ–‡æœ¬æ¡†ä¸­æŒ‡å®šã€‚æ³¨æ„ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å¤åˆ¶build.xmlï¼Œä¿®æ”¹ç›®æ ‡å’Œå‚æ•°ï¼Œå¹¶å°†å…¶é‡å‘½åä¸ºä¾‹å¦‚runtest_build.xmlæ¥åˆ›å»ºruntestçš„å¿«æ·æ–¹å¼ã€‚</p>
<h3 id="11-running-end-to-end-tests"><a class="header" href="#11-running-end-to-end-tests">1.1. Running end-to-end tests</a></h3>
<p>We have also provided a set of end-to-end tests that will eventually be used for grading. These tests are structured as JUnit tests that live in the <code>test/simpledb/systemtest</code> directory. To run all the system tests, use the <code>systemtest</code> build target:</p>
<p>æˆ‘ä»¬è¿˜æä¾›äº†ä¸€å¥—ç«¯åˆ°ç«¯çš„æµ‹è¯•ï¼Œæœ€ç»ˆå°†ç”¨äºè¯„åˆ†ã€‚è¿™äº›æµ‹è¯•çš„ç»“æ„æ˜¯JUnitæµ‹è¯•ï¼Œå­˜åœ¨äº<code>test/simpledb/systemtest</code> catalog ä¸­ã€‚è¦è¿è¡Œæ‰€æœ‰çš„ç³»ç»Ÿæµ‹è¯•ï¼Œè¯·ä½¿ç”¨<code>systemtest</code>æ„å»ºç›®æ ‡ã€‚</p>
<pre><code>$ ant systemtest

 ... build output ...

    [junit] Testcase: testSmall took 0.017 sec
    [junit]     Caused an ERROR
    [junit] expected to find the following tuples:
    [junit]     19128
    [junit] 
    [junit] java.lang.AssertionError: expected to find the following tuples:
    [junit]     19128
    [junit] 
    [junit]     at simpledb.systemtest.SystemTestUtil.matchTuples(SystemTestUtil.java:122)
    [junit]     at simpledb.systemtest.SystemTestUtil.matchTuples(SystemTestUtil.java:83)
    [junit]     at simpledb.systemtest.SystemTestUtil.matchTuples(SystemTestUtil.java:75)
    [junit]     at simpledb.systemtest.ScanTest.validateScan(ScanTest.java:30)
    [junit]     at simpledb.systemtest.ScanTest.testSmall(ScanTest.java:40)

 ... more error messages ...
</code></pre>
<p>This indicates that this test failed, showing the stack trace where the error was detected. To debug, start by reading the source code where the error occurred. When the tests pass, you will see something like the following:</p>
<p>è¿™è¡¨æ˜è¿™ä¸ªæµ‹è¯•å¤±è´¥äº†ï¼Œæ˜¾ç¤ºæ£€æµ‹åˆ°é”™è¯¯çš„å †æ ˆè·Ÿè¸ªã€‚è¦è¿›è¡Œè°ƒè¯•ï¼Œé¦–å…ˆé˜…è¯»å‘ç”Ÿé”™è¯¯çš„æºä»£ç ã€‚å½“æµ‹è¯•é€šè¿‡æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ã€‚</p>
<pre><code>$ ant systemtest

 ... build output ...

    [junit] Testsuite: simpledb.systemtest.ScanTest
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 7.278 sec
    [junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 7.278 sec
    [junit] 
    [junit] Testcase: testSmall took 0.937 sec
    [junit] Testcase: testLarge took 5.276 sec
    [junit] Testcase: testRandom took 1.049 sec

BUILD SUCCESSFUL
Total time: 52 seconds
</code></pre>
<h4 id="111-creating-dummy-tables"><a class="header" href="#111-creating-dummy-tables">1.1.1 Creating dummy tables</a></h4>
<p>It is likely you'll want to create your own tests and your own data tables to test your own implementation of SimpleDB. You can create any <code>.txt</code> file and convert it to a <code>.dat</code> file in SimpleDB's <code>HeapFile</code> format using the
command:</p>
<p>ä½ å¾ˆå¯èƒ½æƒ³è¦åˆ›å»ºè‡ªå·±çš„æµ‹è¯•å’Œè‡ªå·±çš„æ•°æ®è¡¨æ¥æµ‹è¯•ä½ è‡ªå·±çš„SimpleDBçš„å®ç°ã€‚ä½ å¯ä»¥åˆ›å»ºä»»ä½•&quot;.txt &quot;æ–‡ä»¶å¹¶å°†å…¶è½¬æ¢æˆSimpleDBçš„ &quot;HeapFile &quot;æ ¼å¼çš„&quot;.dat &quot;æ–‡ä»¶ï¼Œä½¿ç”¨
å‘½ä»¤ã€‚</p>
<pre><code>$ java -jar dist/simpledb.jar convert file.txt N
</code></pre>
<p>where <code>file.txt</code> is the name of the file and <code>N</code> is the number of columns in the file. Notice that <code>file.txt</code> has to be in the following format:</p>
<p>å…¶ä¸­<code>file.txt</code>æ˜¯æ–‡ä»¶çš„åç§°ï¼Œ<code>N</code>æ˜¯æ–‡ä»¶ä¸­çš„åˆ—æ•°ã€‚è¯·æ³¨æ„ï¼Œ<code>file.txt</code>å¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ã€‚</p>
<pre><code>int1,int2,...,intN
int1,int2,...,intN
int1,int2,...,intN
int1,int2,...,intN
</code></pre>
<p>...where each intN is a non-negative integer.</p>
<p>...å…¶ä¸­æ¯ä¸ªintNæ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚</p>
<p>To view the contents of a table, use the <code>print</code> command:</p>
<p>è¦æŸ¥çœ‹ä¸€ä¸ªè¡¨çš„å†…å®¹ï¼Œä½¿ç”¨<code>print</code>å‘½ä»¤ã€‚</p>
<pre><code>$ java -jar dist/simpledb.jar print file.dat N
</code></pre>
<p>where <code>file.dat</code> is the name of a table created with the <tt>convert</tt> command, and <code>N</code> is the number of columns in the file.</p>
<p>å…¶ä¸­ <code>file.dat</code> æ˜¯ç”¨<tt>convert</tt>å‘½ä»¤åˆ›å»ºçš„è¡¨çš„åç§°ï¼Œ<code>N</code> æ˜¯æ–‡ä»¶ä¸­çš„åˆ—æ•°ã€‚</p>
<h3 id="12-working-with-an-ide"><a class="header" href="#12-working-with-an-ide">1.2. Working with an IDE</a></h3>
<p>IDEs (Integrated Development Environments) are graphical software development environments that may help you manage larger projects. We provide instructions for setting up both <a href="http://www.eclipse.org">Eclipse</a> and <a href="https://www.jetbrains.com/idea/">IntelliJ</a>. The instructions we provide for Eclipse were generated by using Eclipse for Java Developers (not the enterprise edition) with Java 1.7. For IntelliJ, we are using the Ultimate edition, which you can get with an education license through your mit.edu account <a href="https://www.jetbrains.com/community/education/#students">here</a>. We strongly encourage you to set up and learn one of the IDEs for this project.</p>
<p>IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰æ˜¯å›¾å½¢åŒ–çš„è½¯ä»¶å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥å¸®åŠ©ä½ ç®¡ç†å¤§å‹é¡¹ç›®ã€‚æˆ‘ä»¬æä¾›<a href="http://www.eclipse.org">Eclipse</a>å’Œ<a href="https://www.jetbrains.com/idea/">IntelliJ</a>çš„è®¾ç½®è¯´æ˜ã€‚æˆ‘ä»¬ä¸º Eclipse æä¾›çš„è¯´æ˜æ˜¯é€šè¿‡ä½¿ç”¨ Java 1.7 çš„ Eclipse for Java Developersï¼ˆä¸æ˜¯ä¼ä¸šç‰ˆï¼‰ç”Ÿæˆçš„ã€‚å¯¹äº IntelliJï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç»ˆæç‰ˆï¼Œä½ å¯ä»¥é€šè¿‡ä½ çš„ mit.edu è´¦æˆ·è·å¾—æ•™è‚²è®¸å¯<a href="https://www.jetbrains.com/community/education/#students">è¿™é‡Œ</a>ã€‚æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä¸ºè¿™ä¸ªé¡¹ç›®è®¾ç½®å¹¶å­¦ä¹ å…¶ä¸­çš„ä¸€ä¸ªIDEã€‚</p>
<p><strong>Preparing the Codebase</strong></p>
<p><strong>å‡†å¤‡ä»£ç åº“</strong>ã€‚</p>
<p>Run the following command to generate the project file for IDEs:</p>
<p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ç”Ÿæˆç”¨äºIDEçš„é¡¹ç›®æ–‡ä»¶ã€‚</p>
<pre><code>ant eclipse
</code></pre>
<p><strong>Setting the Lab Up in Eclipse</strong></p>
<ul>
<li>
<p>Once Eclipse is installed, start it, and note that the first screen asks you to select a location for your workspace (we will refer to this directory as $W). Select the directory containing your simple-db-hw repository.</p>
</li>
<li>
<p>In Eclipse, select File-&gt;New-&gt;Project-&gt;Java-&gt;Java Project, and push Next.</p>
</li>
<li>
<p>Enter &quot;simple-db-hw&quot; as the project name.</p>
</li>
<li>
<p>On the same screen that you entered the project name, select &quot;Create project from existing source,&quot; and browse to $W/simple-db-hw.</p>
</li>
<li>
<p>Click finish, and you should be able to see &quot;simple-db-hw&quot; as a new project in the Project Explorer tab on the left-hand side of your screen. Opening this project reveals the directory structure discussed above - implementation code can be found in &quot;src,&quot; and unit tests and system tests found in &quot;test.&quot;</p>
</li>
<li>
<p>ä¸€æ—¦Eclipseå®‰è£…å®Œæ¯•ï¼Œå¯åŠ¨å®ƒï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå±å¹•ä¼šè¦æ±‚ä½ ä¸ºä½ çš„å·¥ä½œåŒºé€‰æ‹©ä¸€ä¸ªä½ç½®ï¼ˆæˆ‘ä»¬å°†è¿™ä¸ª catalog ç§°ä¸º$Wï¼‰ã€‚é€‰æ‹©åŒ…å«simple-db-hwèµ„æºåº“çš„ catalog ã€‚</p>
</li>
<li>
<p>åœ¨Eclipseä¸­ï¼Œé€‰æ‹©File-&gt;New-&gt;Project-&gt;Java-&gt;Java Projectï¼Œç„¶åæŒ‰Nextã€‚</p>
</li>
<li>
<p>è¾“å…¥ &quot;simple-db-hw &quot;ä½œä¸ºé¡¹ç›®åç§°ã€‚</p>
</li>
<li>
<p>åœ¨ä½ è¾“å…¥é¡¹ç›®åç§°çš„åŒä¸€ä¸ªå±å¹•ä¸Šï¼Œé€‰æ‹© &quot;ä»ç°æœ‰æºç åˆ›å»ºé¡¹ç›®&quot;ï¼Œå¹¶æµè§ˆåˆ°$W/simple-db-hwã€‚</p>
</li>
<li>
<p>ç‚¹å‡»å®Œæˆï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ° &quot;simple-db-hw &quot;ä½œä¸ºä¸€ä¸ªæ–°çš„é¡¹ç›®å‡ºç°åœ¨å±å¹•å·¦ä¾§çš„ &quot;é¡¹ç›®æµè§ˆå™¨ &quot;æ ‡ç­¾ä¸­ã€‚æ‰“å¼€è¿™ä¸ªé¡¹ç›®å¯ä»¥çœ‹åˆ°ä¸Šé¢è®¨è®ºçš„ catalog ç»“æ„--å®ç°ä»£ç å¯ä»¥åœ¨ &quot;src &quot;ä¸­æ‰¾åˆ°ï¼Œå•å…ƒæµ‹è¯•å’Œç³»ç»Ÿæµ‹è¯•åœ¨ &quot;test &quot;ä¸­æ‰¾åˆ°ã€‚</p>
</li>
</ul>
<p><strong>Note:</strong> that this class assumes that you are using the official Oracle release of Java. This is the default on MacOS X, and for most Windows Eclipse installs; but many Linux distributions default to alternate Java runtimes (like OpenJDK). Please download the latest Java8 updates from <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle Website</a>, and use that Java version. If you don't switch, you may see spurious test failures in some of the performance tests in later labs.</p>
<p>**æ³¨æ„ï¼š**è¯¥ç±»å‡å®šä½ ä½¿ç”¨çš„æ˜¯Oracleå®˜æ–¹å‘å¸ƒçš„Javaã€‚è¿™åœ¨ MacOS X ä¸Šæ˜¯é»˜è®¤çš„ï¼Œå¯¹äºå¤§å¤šæ•° Windows Eclipse å®‰è£…æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ï¼›ä½†è®¸å¤š Linux å‘è¡Œç‰ˆé»˜è®¤ä½¿ç”¨å…¶ä»– Java è¿è¡Œæ—¶ï¼ˆå¦‚ OpenJDKï¼‰ã€‚è¯·ä» [Oracle ç½‘ç«™] (http://www.oracle.com/technetwork/java/javase/downloads/index.html) ä¸‹è½½æœ€æ–°çš„ Java8 æ›´æ–°ï¼Œå¹¶ä½¿ç”¨è¯¥ Java ç‰ˆæœ¬ã€‚å¦‚æœä½ ä¸åˆ‡æ¢ï¼Œä½ å¯èƒ½ä¼šåœ¨åé¢çš„å®éªŒçš„ä¸€äº›æ€§èƒ½æµ‹è¯•ä¸­çœ‹åˆ°è™šå‡çš„æµ‹è¯•å¤±è´¥ã€‚</p>
<p><strong>Running Individual Unit and System Tests</strong></p>
<p><strong>è¿è¡Œå•ä¸ªå•å…ƒå’Œç³»ç»Ÿæµ‹è¯•</strong>ã€‚</p>
<p>To run a unit test or system test (both are JUnit tests, and can be initialized the same way), go to the Package Explorer tab on the left side of your screen. Under the &quot;simple-db-hw&quot; project, open the &quot;test&quot; directory. Unit tests are found in the &quot;simpledb&quot; package, and system tests are found in the &quot;simpledb.systemtests&quot; package. To run one of these tests, select the test (they are all called *Test.java - don't select TestUtil.java or SystemTestUtil.java), right click on it, select &quot;Run As,&quot; and select &quot;JUnit Test.&quot;  This will bring up a JUnit tab, which will tell you the status of the individual tests within the JUnit test suite, and will show you exceptions and other errors that will help you debug problems.</p>
<p>è¦è¿è¡Œä¸€ä¸ªå•å…ƒæµ‹è¯•æˆ–ç³»ç»Ÿæµ‹è¯•ï¼ˆä¸¤è€…éƒ½æ˜¯JUnitæµ‹è¯•ï¼Œå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•åˆå§‹åŒ–ï¼‰ï¼Œå»å±å¹•å·¦è¾¹çš„Package Exploreræ ‡ç­¾ã€‚åœ¨ &quot;simple-db-hw &quot;é¡¹ç›®ä¸‹ï¼Œæ‰“å¼€ &quot;test &quot; catalog ã€‚å•å…ƒæµ‹è¯•å¯ä»¥åœ¨ &quot;simpledb &quot;åŒ…ä¸­æ‰¾åˆ°ï¼Œç³»ç»Ÿæµ‹è¯•å¯ä»¥åœ¨ &quot;simpledb.systemtests &quot;åŒ…ä¸­æ‰¾åˆ°ã€‚è¦è¿è¡Œè¿™äº›æµ‹è¯•ä¹‹ä¸€ï¼Œé€‰æ‹©æµ‹è¯•ï¼ˆå®ƒä»¬éƒ½è¢«ç§°ä¸º*Test.java - ä¸è¦é€‰æ‹©TestUtil.javaæˆ–SystemTestUtil.javaï¼‰ï¼Œå³å‡»å®ƒï¼Œé€‰æ‹© &quot;è¿è¡Œä¸º&quot;ï¼Œå¹¶é€‰æ‹© &quot;JUnitæµ‹è¯•&quot;ã€‚ è¿™å°†å¼¹å‡ºä¸€ä¸ªJUnitæ ‡ç­¾ï¼Œå®ƒå°†å‘Šè¯‰ä½ JUnitæµ‹è¯•å¥—ä»¶ä¸­å„ä¸ªæµ‹è¯•çš„çŠ¶æ€ï¼Œå¹¶å°†æ˜¾ç¤ºå¼‚å¸¸å’Œå…¶ä»–é”™è¯¯ï¼Œè¿™å°†æœ‰åŠ©äºä½ è°ƒè¯•é—®é¢˜ã€‚</p>
<p><strong>Running Ant Build Targets</strong></p>
<p>If you want to run commands such as &quot;ant test&quot; or &quot;ant systemtest,&quot; right click on build.xml in the Package Explorer. Select &quot;Run As,&quot; and then &quot;Ant Build...&quot; (note: select the option with the ellipsis (...), otherwise you won't be presented with a set of build targets to run). Then, in the &quot;Targets&quot; tab of the next screen, check off the targets you want to run (probably &quot;dist&quot; and one of &quot;test&quot; or &quot;systemtest&quot;). This should run the build targets and show you the results in Eclipse's console window.</p>
<p>å¦‚æœä½ æƒ³è¿è¡Œ &quot;ant test &quot;æˆ– &quot;ant systemtest &quot;è¿™æ ·çš„å‘½ä»¤ï¼Œåœ¨è½¯ä»¶åŒ…èµ„æºç®¡ç†å™¨ä¸­å³å‡»build.xmlã€‚é€‰æ‹© &quot;Run As&quot;ï¼Œç„¶åé€‰æ‹© &quot;Ant Build...&quot;ï¼ˆæ³¨æ„ï¼šé€‰æ‹©å¸¦çœç•¥å·ï¼ˆ...ï¼‰çš„é€‰é¡¹ï¼Œå¦åˆ™ä½ å°†ä¸ä¼šçœ‹åˆ°ä¸€ç»„è¦è¿è¡Œçš„æ„å»ºç›®æ ‡ï¼‰ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªå±å¹•çš„ &quot;ç›®æ ‡ &quot;é€‰é¡¹å¡ä¸­ï¼Œé€‰ä¸­ä½ æƒ³è¿è¡Œçš„ç›®æ ‡ï¼ˆå¯èƒ½æ˜¯ &quot;dist &quot;å’Œ &quot;test &quot;æˆ– &quot;systemtest &quot;ä¸­çš„ä¸€ä¸ªï¼‰ã€‚è¿™åº”è¯¥ä¼šè¿è¡Œæ„å»ºç›®æ ‡ï¼Œå¹¶åœ¨ Eclipse çš„æ§åˆ¶å°çª—å£ä¸­æ˜¾ç¤ºç»“æœã€‚</p>
<p><strong>Setting the Lab Up in IntelliJ</strong></p>
<p>IntelliJ is a more modern Java IDE that is popular and more intuitive to use by some accounts. To use IntelliJ, first install it and open the application. Similar to Eclipse, under Projects, select Open and navigate to your project root. Double-click on the .project file (you may need to configure your operating system to reveal hidden files to see it), and click &quot;open as project&quot;. IntelliJ has tool window support with Ant that you may want to setup according to instructions <a href="https://www.jetbrains.com/help/idea/ant.html">here</a>, but this is not essential to development. You can find a detailed walkthrough of IntelliJ features <a href="https://www.jetbrains.com/help/idea/discover-intellij-idea.html">here</a></p>
<p>IntelliJæ˜¯ä¸€ä¸ªæ›´ç°ä»£çš„Javaé›†æˆå¼€å‘ç¯å¢ƒï¼Œåœ¨ä¸€äº›äººçœ‹æ¥ï¼Œå®ƒå¾ˆå—æ¬¢è¿ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´ç›´è§‚ã€‚è¦ä½¿ç”¨IntelliJï¼Œé¦–å…ˆå®‰è£…å®ƒå¹¶æ‰“å¼€åº”ç”¨ç¨‹åºã€‚ä¸Eclipseç±»ä¼¼ï¼Œåœ¨Projectsä¸‹ï¼Œé€‰æ‹©Openå¹¶å¯¼èˆªåˆ°ä½ çš„é¡¹ç›®æ ¹ã€‚åŒå‡».projectæ–‡ä»¶ï¼ˆä½ å¯èƒ½éœ€è¦é…ç½®ä½ çš„æ“ä½œç³»ç»Ÿä»¥æ˜¾ç¤ºéšè—çš„æ–‡ä»¶æ¥æŸ¥çœ‹å®ƒï¼‰ï¼Œç„¶åç‚¹å‡» &quot;ä½œä¸ºé¡¹ç›®æ‰“å¼€&quot;ã€‚IntelliJæœ‰Antçš„å·¥å…·çª—å£æ”¯æŒï¼Œä½ å¯èƒ½æƒ³æ ¹æ®è¯´æ˜[è¿™é‡Œ]ï¼ˆhttps://www.jetbrains.com/help/idea/ant.htmlï¼‰è¿›è¡Œè®¾ç½®ï¼Œä½†è¿™å¯¹å¼€å‘æ¥è¯´å¹¶ä¸æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå…³äºIntelliJåŠŸèƒ½çš„è¯¦ç»†ä»‹ç»<a href="https://www.jetbrains.com/help/idea/discover-intellij-idea.html">è¿™é‡Œ</a></p>
<h3 id="13-implementation-hints"><a class="header" href="#13-implementation-hints">1.3. Implementation hints</a></h3>
<p>Before beginning to write code, we <strong>strongly encourage</strong> you to read through this entire document to get a feel for the high-level design of SimpleDB.</p>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬***å¼ºçƒˆå»ºè®®ä½ é˜…è¯»æ•´ä¸ªæ–‡æ¡£ï¼Œä»¥äº†è§£SimpleDBçš„é¡¶å±‚è®¾è®¡ã€‚</p>
<p>
<p>You will need to fill in any piece of code that is not implemented. It will be obvious where we think you should write code. You may need to add private methods and/or helper classes. You may change APIs, but make sure our <a href="#grading">grading</a> tests still run and make sure to mention, explain, and defend your decisions in your writeup.</p>
<p>ä½ å°†éœ€è¦å¡«å†™ä»»ä½•æ²¡æœ‰å®ç°çš„ä»£ç ã€‚æˆ‘ä»¬è®¤ä¸ºä½ åº”è¯¥åœ¨å“ªé‡Œå†™ä»£ç ï¼Œè¿™å°†æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä½ å¯èƒ½éœ€è¦æ·»åŠ ç§æœ‰æ–¹æ³•å’Œ/æˆ–è¾…åŠ©ç±»ã€‚ä½ å¯ä»¥æ”¹å˜APIï¼Œä½†è¦ç¡®ä¿æˆ‘ä»¬çš„<a href="#%E8%AF%84%E5%88%86">è¯„åˆ†</a>æµ‹è¯•ä»ç„¶è¿è¡Œï¼Œå¹¶ç¡®ä¿åœ¨ä½ çš„å†™æ³•ä¸­æåˆ°ã€è§£é‡Šå’Œè¾©æŠ¤ä½ çš„å†³å®šã€‚</p>
<p>
<p>In addition to the methods that you need to fill out for this lab, the class interfaces contain numerous methods that you need not implement until subsequent labs. These will either be indicated per class:</p>
<p>é™¤äº†æœ¬å®éªŒéœ€è¦å¡«å†™çš„æ–¹æ³•å¤–ï¼Œç±»çš„æ¥å£è¿˜åŒ…å«è®¸å¤šæ–¹æ³•ï¼Œä½ éœ€è¦åœ¨ä»¥åçš„å®éªŒä¸­æ‰èƒ½å®ç°ã€‚è¿™äº›æ–¹æ³•æˆ–è€…ä¼šåœ¨æ¯ä¸ªç±»ä¸­æ³¨æ˜ã€‚</p>
<pre><code class="language-java">// Not necessary for lab1.
public class Insert implements DbIterator {
</code></pre>
<p>or per method:</p>
<p>æˆ–æ¯ä¸ªæ–¹æ³•ã€‚</p>
<pre><code class="language-Java">public boolean deleteTuple(Tuple t)throws DbException{
        // some code goes here
        // not necessary for lab1
        return false;
        }
</code></pre>
<p>The code that you submit should compile without having to modify these methods.</p>
<p>ä½ æäº¤çš„ä»£ç åº”è¯¥åœ¨ä¸ä¿®æ”¹è¿™äº›æ–¹æ³•çš„æƒ…å†µä¸‹è¿›è¡Œç¼–è¯‘ã€‚</p>
<p>
<p>We suggest exercises along this document to guide your implementation, but you may find that a different order makes more sense for you.</p>
<p>æˆ‘ä»¬å»ºè®®æ²¿ç€è¿™ä»½æ–‡ä»¶è¿›è¡Œç»ƒä¹ ï¼Œä»¥æŒ‡å¯¼ä½ çš„å®æ–½ï¼Œä½†ä½ å¯èƒ½å‘ç°ä¸åŒçš„é¡ºåºå¯¹ä½ æ›´æœ‰æ„ä¹‰ã€‚</p>
<p><strong>Here's a rough outline of one way you might proceed with your SimpleDB implementation:</strong></p>
<p><strong>ä»¥ä¸‹æ˜¯ä½ å¯èƒ½è¿›è¡ŒSimpleDBå®ç°çš„ä¸€ä¸ªç²—ç•¥è½®å»“ï¼š</strong>ã€‚</p>
<hr />
<ul>
<li>Implement the classes to manage tuples, namely Tuple, TupleDesc. We have already implemented Field, IntField,
StringField, and Type for you. Since you only need to support integer and (fixed length) string fields and fixed
length tuples, these are straightforward.</li>
<li>Implement the Catalog (this should be very simple).</li>
<li>Implement the BufferPool constructor and the getPage() method.</li>
<li>Implement the access methods, HeapPage and HeapFile and associated ID classes. A good portion of these files has
already been written for you.</li>
<li>Implement the operator SeqScan.</li>
<li>At this point, you should be able to pass the ScanTest system test, which is the goal for this lab.</li>
</ul>
<hr />
<ul>
<li>å®ç°ç®¡ç†Tupleçš„ç±»ï¼Œå³Tupleã€TupleDescã€‚ æˆ‘ä»¬å·²ç»å®ç°äº†Fieldã€IntFieldã€‚
StringFieldï¼Œå’ŒTypeç»™ä½ ã€‚å› ä¸ºä½ åªéœ€è¦æ”¯æŒæ•´æ•°å’Œï¼ˆå›ºå®šé•¿åº¦çš„ï¼‰å­—ç¬¦ä¸²å­—æ®µä»¥åŠå›ºå®šé•¿åº¦çš„ tuples ã€‚
é•¿åº¦çš„ tuplesï¼Œè¿™äº›éƒ½æ˜¯ç®€å•æ˜äº†çš„ã€‚</li>
<li>å®ç° catalog ï¼ˆè¿™åº”è¯¥éå¸¸ç®€å•ï¼‰ã€‚</li>
<li>å®ç°BufferPoolæ„é€ å‡½æ•°å’ŒgetPage()æ–¹æ³•ã€‚</li>
<li>å®ç°è®¿é—®æ–¹æ³•ï¼ŒHeapPageå’ŒHeapFileä»¥åŠç›¸å…³çš„IDç±»ã€‚è¿™äº›æ–‡ä»¶çš„å¾ˆå¤§ä¸€éƒ¨åˆ†å·²ç»
å·²ç»ä¸ºä½ å†™å¥½äº†ã€‚</li>
<li>å®ç°æ“ä½œç¬¦SeqScanã€‚</li>
<li>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥èƒ½å¤Ÿé€šè¿‡ScanTestç³»ç»Ÿæµ‹è¯•ï¼Œè¿™æ˜¯æœ¬å®éªŒçš„ç›®æ ‡ã€‚</li>
</ul>
<p>Section 2 below walks you through these implementation steps and the unit tests corresponding to each one in more detail.</p>
<p>ä¸‹é¢çš„ç¬¬2èŠ‚å°†å¼•å¯¼ä½ æ›´è¯¦ç»†åœ°äº†è§£è¿™äº›å®ç°æ­¥éª¤å’Œæ¯ä¸ªæ­¥éª¤æ‰€å¯¹åº”çš„å•å…ƒæµ‹è¯•ã€‚</p>
<h3 id="14-transactions-locking-and-recovery"><a class="header" href="#14-transactions-locking-and-recovery">1.4. Transactions, locking, and recovery</a></h3>
<p>As you look through the interfaces we have provided you, you will see a number of references to locking, transactions, and recovery. You do not need to support these features in this lab, but you should keep these parameters in the interfaces of your code because you will be implementing transactions and locking in a future lab. The test code we have provided you with generates a fake transaction ID that is passed into the operators of the query it runs; you should pass this transaction ID into other operators and the buffer pool.</p>
<p>å½“ä½ æµè§ˆæˆ‘ä»¬æä¾›ç»™ä½ çš„æ¥å£æ—¶ï¼Œä½ ä¼šçœ‹åˆ°è®¸å¤šå¯¹é”ã€äº‹åŠ¡å’Œæ¢å¤çš„å¼•ç”¨ã€‚ä½ ä¸éœ€è¦åœ¨è¿™ä¸ªå®éªŒä¸­æ”¯æŒè¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯ä½ åº”è¯¥åœ¨ä½ çš„ä»£ç çš„æ¥å£ä¸­ä¿ç•™è¿™äº›å‚æ•°ï¼Œå› ä¸ºä½ å°†åœ¨æœªæ¥çš„å®éªŒä¸­å®ç°äº‹åŠ¡å’Œé”å®šã€‚æˆ‘ä»¬ä¸ºä½ æä¾›çš„æµ‹è¯•ä»£ç ä¼šç”Ÿæˆä¸€ä¸ªå‡çš„äº‹åŠ¡IDï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å®ƒæ‰€è¿è¡Œçš„æŸ¥è¯¢çš„æ“ä½œè€…ï¼›ä½ åº”è¯¥å°†è¿™ä¸ªäº‹åŠ¡IDä¼ é€’ç»™å…¶ä»–æ“ä½œè€…å’Œç¼“å†²æ± ã€‚</p>
<h2 id="2-simpledb-architecture-and-implementation-guide"><a class="header" href="#2-simpledb-architecture-and-implementation-guide">2. SimpleDB Architecture and Implementation Guide</a></h2>
<p>SimpleDB consists of:</p>
<ul>
<li>Classes that represent fields, tuples, and tuple schemas;</li>
<li>Classes that apply predicates and conditions to tuples;</li>
<li>One or more access methods (e.g., heap files) that store relations on disk and provide a way to iterate through tuples of those relations;</li>
<li>A collection of operator classes (e.g., select, join, insert, delete, etc.) that process tuples;</li>
<li>A buffer pool that caches active tuples and pages in memory and handles concurrency control and transactions (neither of which you need to worry about for this lab); and,</li>
<li>A catalog that stores information about available tables and their schemas.</li>
</ul>
<p>SimpleDBç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>ä»£è¡¨å­—æ®µã€Tupleå’ŒTupleæ¨¡å¼çš„ç±»ã€‚</li>
<li>å¯¹Tupleåº”ç”¨è°“è¯å’Œæ¡ä»¶çš„ç±»ã€‚</li>
<li>ä¸€ä¸ªæˆ–å¤šä¸ªè®¿é—®æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå †æ–‡ä»¶ï¼‰ï¼Œå°†å…³ç³»å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå¹¶æä¾›ä¸€ç§æ–¹æ³•æ¥éå†è¿™äº›å…³ç³»çš„Tupleã€‚</li>
<li>ä¸€ä¸ªæ“ä½œè€…ç±»çš„é›†åˆï¼ˆä¾‹å¦‚ï¼Œé€‰æ‹©ã€è¿æ¥ã€æ’å…¥ã€åˆ é™¤ç­‰ï¼‰ï¼Œç”¨äºå¤„ç†Tupleã€‚</li>
<li>ä¸€ä¸ªç¼“å†²æ± ï¼Œç”¨äºç¼“å­˜å†…å­˜ä¸­çš„æ´»åŠ¨Tupleå’Œé¡µé¢ï¼Œå¹¶å¤„ç†å¹¶å‘æ§åˆ¶å’Œäº‹åŠ¡ï¼ˆåœ¨æœ¬å®éªŒä¸­ä½ ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸¤ç‚¹ï¼‰ï¼›ä»¥åŠã€‚</li>
<li>ä¸€ä¸ª catalog ï¼Œç”¨äºå­˜å‚¨å…³äºå¯ç”¨è¡¨å’Œå®ƒä»¬çš„æ¨¡å¼çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>SimpleDB does not include many things that you may think of as being a part of a &quot;database.&quot;  In particular, SimpleDB does not have:</p>
<p>SimpleDBä¸åŒ…æ‹¬è®¸å¤šä½ å¯èƒ½è®¤ä¸ºæ˜¯ &quot;æ•°æ®åº“ &quot;ä¸€éƒ¨åˆ†çš„ä¸œè¥¿ã€‚ ç‰¹åˆ«æ˜¯ï¼ŒSimpleDBæ²¡æœ‰ã€‚</p>
<ul>
<li>(In this lab), a SQL front end or parser that allows you to type queries directly into SimpleDB. Instead, queries are built up by chaining a set of operators together into a hand-built query plan (see <a href="#query_walkthrough">Section 2.7</a>). We will provide a simple parser for use in later labs.</li>
<li>Views.</li>
<li>Data types except integers and fixed length strings.</li>
<li>(In this lab) Query optimizer.</li>
<li>(In this lab) Indices.</li>
</ul>
<p>*ï¼ˆåœ¨æœ¬å®éªŒä¸­ï¼‰ï¼Œä¸€ä¸ªSQLå‰ç«¯æˆ–åˆ†æå™¨ï¼Œå…è®¸ä½ ç›´æ¥å‘SimpleDBè¾“å…¥æŸ¥è¯¢ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒæŸ¥è¯¢æ˜¯é€šè¿‡å°†ä¸€ç»„è¿ç®—ç¬¦ä¸²è”åˆ°ä¸€ä¸ªæ‰‹å·¥å»ºç«‹çš„æŸ¥è¯¢è®¡åˆ’ä¸­æ¥å»ºç«‹çš„ï¼ˆè§<a href="#query_walkthrough">2.7èŠ‚</a>ï¼‰ã€‚æˆ‘ä»¬å°†æä¾›ä¸€ä¸ªç®€å•çš„è§£æå™¨ï¼Œåœ¨åé¢çš„å®éªŒä¸­ä½¿ç”¨ã€‚</p>
<ul>
<li>è§†å›¾ã€‚</li>
<li>æ•°æ®ç±»å‹ï¼Œé™¤äº†æ•´æ•°å’Œå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚</li>
<li>ï¼ˆåœ¨æœ¬å®éªŒä¸­ï¼‰æŸ¥è¯¢ä¼˜åŒ–å™¨ã€‚</li>
<li>ï¼ˆåœ¨æœ¬å®éªŒä¸­ï¼‰ç´¢å¼•ã€‚</li>
</ul>
<p>
<p>In the rest of this Section, we describe each of the main components of SimpleDB that you will need to implement in this lab. You should use the exercises in this discussion to guide your implementation. This document is by no means a complete specification for SimpleDB; you will need to make decisions about how to design and implement various parts of the system. Note that for Lab 1 you do not need to implement any operators (e.g., select, join, project) except sequential scan. You will add support for additional operators in future labs.</p>
<p>åœ¨æœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æè¿°ä½ åœ¨æœ¬å®éªŒä¸­éœ€è¦å®ç°çš„SimpleDBçš„æ¯ä¸ªä¸»è¦ç»„ä»¶ã€‚ä½ åº”è¯¥ä½¿ç”¨æœ¬è®¨è®ºä¸­çš„ç»ƒä¹ æ¥æŒ‡å¯¼ä½ çš„å®ç°ã€‚æœ¬æ–‡æ¡£ç»ä¸æ˜¯SimpleDBçš„å®Œæ•´è§„èŒƒï¼›ä½ å°†éœ€è¦å¯¹å¦‚ä½•è®¾è®¡å’Œå®ç°ç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†åšå‡ºå†³å®šã€‚æ³¨æ„ï¼Œå¯¹äºå®éªŒ1ï¼Œé™¤äº†é¡ºåºæ‰«æï¼Œä½ ä¸éœ€è¦å®ç°ä»»ä½•æ“ä½œç¬¦ï¼ˆä¾‹å¦‚ï¼Œé€‰æ‹©ã€è¿æ¥ã€é¡¹ç›®ï¼‰ã€‚ä½ å°†åœ¨æœªæ¥çš„å®éªŒä¸­å¢åŠ å¯¹å…¶ä»–è¿ç®—ç¬¦çš„æ”¯æŒã€‚</p>
<p>
<h3 id="21-the-database-class"><a class="header" href="#21-the-database-class">2.1. The Database Class</a></h3>
<p>The Database class provides access to a collection of static objects that are the global state of the database. In particular, this includes methods to access the catalog (the list of all the tables in the database), the buffer pool ( the collection of database file pages that are currently resident in memory), and the log file. You will not need to worry about the log file in this lab. We have implemented the Database class for you. You should take a look at this file as you will need to access these objects.</p>
<p>æ•°æ®åº“ç±»æä¾›äº†å¯¹é™æ€å¯¹è±¡é›†åˆçš„è®¿é—®ï¼Œè¿™äº›å¯¹è±¡æ˜¯æ•°æ®åº“çš„å…¨å±€çŠ¶æ€ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™åŒ…æ‹¬è®¿é—® catalog ï¼ˆæ•°æ®åº“ä¸­æ‰€æœ‰è¡¨çš„åˆ—è¡¨ï¼‰ã€ç¼“å†²æ± ï¼ˆå½“å‰é©»ç•™åœ¨å†…å­˜ä¸­çš„æ•°æ®åº“æ–‡ä»¶é¡µçš„é›†åˆï¼‰å’Œæ—¥å¿—æ–‡ä»¶çš„æ–¹æ³•ã€‚åœ¨æœ¬å®éªŒä¸­ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒæ—¥å¿—æ–‡ä»¶çš„é—®é¢˜ã€‚æˆ‘ä»¬å·²ç»ä¸ºä½ å®ç°äº†æ•°æ®åº“ç±»ã€‚ä½ åº”è¯¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºä½ å°†éœ€è¦è®¿é—®è¿™äº›å¯¹è±¡ã€‚</p>
<h3 id="22-fields-and-tuples"><a class="header" href="#22-fields-and-tuples">2.2. Fields and Tuples</a></h3>
<p>Tuples in SimpleDB are quite basic.  They consist of a collection of <code>Field</code> objects, one per field in the <code>Tuple</code>. <code>Field</code> is an interface that different data types (e.g., integer, string) implement.  <code>Tuple</code> objects are created by the underlying access methods (e.g., heap files, or B-trees), as described in the next section.  Tuples also have a type (or schema), called a <em>tuple descriptor</em>, represented by a <code>TupleDesc</code> object.  This object consists of a collection of <code>Type</code> objects, one per field in the tuple, each of which describes the type of the corresponding field.</p>
<p>SimpleDBä¸­çš„å…ƒç»„æ˜¯éå¸¸åŸºæœ¬çš„ã€‚ å®ƒä»¬ç”± &quot;å­—æ®µ &quot;å¯¹è±¡çš„é›†åˆç»„æˆï¼Œåœ¨ &quot;Tuple &quot;ä¸­æ¯ä¸ªå­—æ®µä¸€ä¸ªã€‚<code>Field</code>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸åŒçš„æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œæ•´æ•°ï¼Œå­—ç¬¦ä¸²ï¼‰éƒ½å¯ä»¥å®ç°ã€‚ <code>Tuple</code>å¯¹è±¡æ˜¯ç”±åº•å±‚è®¿é—®æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå †æ–‡ä»¶ï¼Œæˆ–B-æ ‘ï¼‰åˆ›å»ºçš„ï¼Œå¦‚ä¸‹ä¸€èŠ‚æ‰€è¿°ã€‚ å…ƒç»„ä¹Ÿæœ‰ä¸€ä¸ªç±»å‹ï¼ˆæˆ–æ¨¡å¼ï¼‰ï¼Œç§°ä¸º_å…ƒç»„æè¿°ç¬¦_ï¼Œç”±<code>TupleDesc</code>å¯¹è±¡è¡¨ç¤ºã€‚ è¿™ä¸ªå¯¹è±¡ç”± &quot;ç±»å‹ &quot;å¯¹è±¡çš„é›†åˆç»„æˆï¼Œå…ƒç»„ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æè¿°äº†ç›¸åº”å­—æ®µçš„ç±»å‹ã€‚</p>
<h3 id="exercise-1"><a class="header" href="#exercise-1">Exercise 1</a></h3>
<p><strong>Implement the skeleton methods in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/storage/TupleDesc.java</li>
<li>src/java/simpledb/storage/Tuple.java</li>
</ul>
<hr />
<p>At this point, your code should pass the unit tests TupleTest and TupleDescTest. At this point, modifyRecordId() should fail because you havn't implemented it yet.</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ çš„ä»£ç åº”è¯¥é€šè¿‡å•å…ƒæµ‹è¯•TupleTestå’ŒTupleDescTestã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒmodifyRecordId()åº”è¯¥å¤±è´¥ï¼Œå› ä¸ºä½ è¿˜æ²¡æœ‰å®ç°å®ƒã€‚</p>
<h3 id="23-catalog"><a class="header" href="#23-catalog">2.3. Catalog</a></h3>
<p>The catalog (class <code>Catalog</code> in SimpleDB) consists of a list of the tables and schemas of the tables that are currently in the database. You will need to support the ability to add a new table, as well as getting information about a particular table. Associated with each table is a <code>TupleDesc</code> object that allows operators to determine the types and number of fields in a table.</p>
<p>catalog ï¼ˆSimpleDBä¸­çš„<code>Catalog</code>ç±»ï¼‰ç”±å½“å‰æ•°æ®åº“ä¸­çš„è¡¨å’Œè¡¨çš„æ¨¡å¼çš„åˆ—è¡¨ç»„æˆã€‚ä½ éœ€è¦æ”¯æŒæ·»åŠ ä¸€ä¸ªæ–°çš„è¡¨çš„èƒ½åŠ›ï¼Œä»¥åŠè·å¾—ä¸€ä¸ªç‰¹å®šè¡¨çš„ä¿¡æ¯ã€‚ä¸æ¯ä¸ªè¡¨ç›¸å…³çš„æ˜¯ä¸€ä¸ª<code>TupleDesc</code>å¯¹è±¡ï¼Œå®ƒå…è®¸æ“ä½œè€…ç¡®å®šä¸€ä¸ªè¡¨çš„å­—æ®µç±»å‹å’Œæ•°é‡ã€‚</p>
<p>The global catalog is a single instance of <code>Catalog</code> that is allocated for the entire SimpleDB process. The global catalog can be retrieved via the method <code>Database.getCatalog()</code>, and the same goes for the global buffer pool (using <code>Database.getBufferPool()</code>).</p>
<p>å…¨å±€ catalog æ˜¯ä¸€ä¸ªå•ä¸€çš„<code>Catalog</code>å®ä¾‹ï¼Œä¸ºæ•´ä¸ªSimpleDBè¿›ç¨‹åˆ†é…ã€‚å…¨å±€ catalog å¯ä»¥é€šè¿‡<code>Database.getCatalog()</code>æ–¹æ³•æ¥æ£€ç´¢ï¼Œå…¨å±€ç¼“å†²æ± ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆä½¿ç”¨<code>Database.getBufferPool()</code>ï¼‰ã€‚</p>
<h3 id="exercise-2"><a class="header" href="#exercise-2">Exercise 2</a></h3>
<p><strong>Implement the skeleton methods in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/common/Catalog.java</li>
</ul>
<hr />
<p>At this point, your code should pass the unit tests in CatalogTest.</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ çš„ä»£ç åº”è¯¥é€šè¿‡CatalogTestçš„å•å…ƒæµ‹è¯•ã€‚</p>
<h3 id="24-bufferpool"><a class="header" href="#24-bufferpool">2.4. BufferPool</a></h3>
<p>The buffer pool (class <code>BufferPool</code> in SimpleDB) is responsible for caching pages in memory that have been recently read from disk. All operators read and write pages from various files on disk through the buffer pool. It consists of a fixed number of pages, defined by the <code>numPages</code> parameter to the <code>BufferPool</code> constructor. In later labs, you will implement an eviction policy. For this lab, you only need to implement the constructor and the <code>BufferPool.getPage()</code> method used by the SeqScan operator. The BufferPool should store up to <code>numPages</code> pages. For this lab, if more than <code>numPages</code> requests are made for different pages, then instead of implementing an eviction policy, you may throw a DbException. In future labs you will be required to implement an eviction policy.</p>
<p>ç¼“å†²æ± ï¼ˆSimpleDBä¸­çš„<code>BufferPool</code>ç±»ï¼‰è´Ÿè´£åœ¨å†…å­˜ä¸­ç¼“å­˜æœ€è¿‘ä»ç£ç›˜è¯»å–çš„é¡µé¢ã€‚æ‰€æœ‰çš„æ“ä½œè€…é€šè¿‡ç¼“å†²æ± ä»ç£ç›˜ä¸Šçš„å„ç§æ–‡ä»¶è¯»å†™é¡µé¢ã€‚å®ƒç”±å›ºå®šæ•°é‡çš„é¡µé¢ç»„æˆï¼Œç”±<code>BufferPool</code>æ„é€ å‡½æ•°çš„<code>numPages</code>å‚æ•°å®šä¹‰ã€‚åœ¨åé¢çš„å®éªŒä¸­ï¼Œä½ å°†å®ç°ä¸€ä¸ªé©±é€ç­–ç•¥ã€‚å¯¹äºè¿™ä¸ªå®éªŒï¼Œä½ åªéœ€è¦å®ç°æ„é€ å‡½æ•°å’ŒSeqScanæ“ä½œè€…ä½¿ç”¨çš„<code>BufferPool.getPage()</code>æ–¹æ³•ã€‚BufferPoolåº”è¯¥æœ€å¤šå­˜å‚¨<code>numPages</code>é¡µã€‚å¯¹äºè¿™ä¸ªå®éªŒï¼Œå¦‚æœå¯¹ä¸åŒé¡µé¢çš„è¯·æ±‚è¶…è¿‡<code>numPages</code>ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠ›å‡ºä¸€ä¸ªDbExceptionï¼Œè€Œä¸æ˜¯å®æ–½é©±é€ç­–ç•¥ã€‚åœ¨æœªæ¥çš„å®éªŒä¸­ï¼Œä½ å°†è¢«è¦æ±‚å®ç°ä¸€ä¸ªé©±é€ç­–ç•¥ã€‚</p>
<p>The <code>Database</code> class provides a static method, <code>Database.getBufferPool()</code>, that returns a reference to the single BufferPool instance for the entire SimpleDB process.</p>
<p>æ•°æ®åº“ &quot;ç±»æä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œ&quot;Database.getBufferPool()&quot;ï¼Œç”¨äºè¿”å›æ•´ä¸ªSimpleDBè¿›ç¨‹çš„å•ä¸ªBufferPoolå®ä¾‹çš„å¼•ç”¨ã€‚</p>
<h3 id="exercise-3"><a class="header" href="#exercise-3">Exercise 3</a></h3>
<p><strong>Implement the <code>getPage()</code> method in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/storage/BufferPool.java</li>
</ul>
<hr />
<p>We have not provided unit tests for BufferPool. The functionality you implemented will be tested in the implementation of HeapFile below. You should use the <code>DbFile.readPage</code> method to access pages of a DbFile.</p>
<p>æˆ‘ä»¬æ²¡æœ‰ä¸º BufferPool æä¾›å•å…ƒæµ‹è¯•ã€‚ä½ å®ç°çš„åŠŸèƒ½å°†åœ¨ä¸‹é¢HeapFileçš„å®ç°ä¸­å¾—åˆ°æµ‹è¯•ã€‚ä½ åº”è¯¥ä½¿ç”¨<code>DbFile.readPage</code>æ–¹æ³•æ¥è®¿é—®DbFileçš„é¡µé¢ã€‚</p>
<!--
When more than this many pages are in the buffer pool, one page should be evicted from the pool before the next is loaded.  The choice of eviction policy is up to you; it is not necessary to do something sophisticated.

å½“ç¼“å†²æ± ä¸­çš„é¡µé¢è¶…è¿‡è¿™ä¸ªæ•°é‡æ—¶ï¼Œåœ¨åŠ è½½ä¸‹ä¸€ä¸ªé¡µé¢ä¹‹å‰ï¼Œåº”è¯¥å°†ä¸€ä¸ªé¡µé¢ä»ç¼“å†²æ± ä¸­é©±é€å‡ºå»ã€‚ é©±é€ç­–ç•¥çš„é€‰æ‹©ç”±ä½ å†³å®šï¼›æ²¡æœ‰å¿…è¦åšä¸€äº›å¤æ‚çš„äº‹æƒ…ã€‚

-->
<!--
<p>

Notice that `BufferPool` asks you to implement a `flush_all_pages()` method.  This is not something you would ever need in a real implementation of a buffer pool.  However, we need this method for testing purposes.  You really should never call this method from anywhere in your code.

æ³¨æ„`BufferPool`è¦æ±‚ä½ å®ç°`flush_all_pages()`æ–¹æ³•ã€‚ è¿™ä¸æ˜¯ä½ åœ¨çœŸæ­£å®ç°ç¼“å†²æ± æ—¶éœ€è¦çš„ä¸œè¥¿ã€‚ ç„¶è€Œï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªæ–¹æ³•ç”¨äºæµ‹è¯•ã€‚ ä½ çœŸçš„ä¸åº”è¯¥åœ¨ä½ çš„ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

-->
<h3 id="25-heapfile-access-method"><a class="header" href="#25-heapfile-access-method">2.5. HeapFile access method</a></h3>
<p>Access methods provide a way to read or write data from disk that is arranged in a specific way. Common access methods include heap files (unsorted files of tuples) and B-trees; for this assignment, you will only implement a heap file access method, and we have written some of the code for you.</p>
<p>è®¿é—®æ–¹æ³•æä¾›äº†ä¸€ç§ä»ç£ç›˜è¯»å–æˆ–å†™å…¥ä»¥ç‰¹å®šæ–¹å¼æ’åˆ—çš„æ•°æ®çš„æ–¹æ³•ã€‚å¸¸è§çš„è®¿é—®æ–¹æ³•åŒ…æ‹¬å †æ–‡ä»¶ï¼ˆæœªç»æ’åºçš„ tuple æ–‡ä»¶ï¼‰å’Œ B æ ‘ï¼›å¯¹äºè¿™é¡¹ä½œä¸šï¼Œä½ å°†åªå®ç°ä¸€ä¸ªå †æ–‡ä»¶è®¿é—®æ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»ä¸ºä½ å†™äº†ä¸€äº›ä»£ç ã€‚</p>
<p>
<p>A <code>HeapFile</code> object is arranged into a set of pages, each of which consists of a fixed number of bytes for storing tuples, (defined by the constant <code>BufferPool.DEFAULT_PAGE_SIZE</code>), including a header. In SimpleDB, there is one <code>HeapFile</code> object for each table in the database. Each page in a <code>HeapFile</code> is arranged as a set of slots, each of which can hold one tuple (tuples for a given table in SimpleDB are all of the same size). In addition to these slots, each page has a header that consists of a bitmap with one bit per tuple slot. If the bit corresponding to a particular tuple is 1, it indicates that the tuple is valid; if it is 0, the tuple is invalid (e.g., has been deleted or was never initialized.)  Pages of <code>HeapFile</code> objects are of type <code>HeapPage</code> which implements the <code>Page</code> interface. Pages are stored in the buffer pool but are read and written by the <code>HeapFile</code> class.</p>
<p>ä¸€ä¸ª<code>HeapFile</code>å¯¹è±¡è¢«å®‰æ’æˆä¸€ç»„é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢ç”±å›ºå®šæ•°é‡çš„å­—èŠ‚ç»„æˆï¼Œç”¨äºå­˜å‚¨ tuple ï¼Œï¼ˆç”±å¸¸æ•°<code>BufferPool.DEFAULT_PAGE_SIZE</code>å®šä¹‰ï¼‰ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå¤´ã€‚åœ¨SimpleDBä¸­ï¼Œæ•°æ®åº“ä¸­æ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ª<code>HeapFile</code>å¯¹è±¡ã€‚<code>HeapFile</code>ä¸­çš„æ¯ä¸ªé¡µé¢è¢«å®‰æ’ä¸ºä¸€ç»„æ§½ï¼Œæ¯ä¸ªæ§½å¯ä»¥å®¹çº³ä¸€ä¸ªå…ƒç»„ï¼ˆSimpleDBä¸­ä¸€ä¸ªç»™å®šçš„è¡¨çš„å…ƒç»„éƒ½æ˜¯ç›¸åŒå¤§å°çš„ï¼‰ã€‚é™¤äº†è¿™äº›æ§½ä¹‹å¤–ï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰ä¸€ä¸ªå¤´ï¼Œç”±ä¸€ä¸ªä½å›¾ç»„æˆï¼Œæ¯ä¸ªå…ƒç»„æ§½æœ‰ä¸€ä¸ªä½ã€‚å¦‚æœæŸä¸ªå…ƒç»„å¯¹åº”çš„ä½æ˜¯1ï¼Œè¡¨ç¤ºè¯¥å…ƒç»„æ˜¯æœ‰æ•ˆçš„ï¼›å¦‚æœæ˜¯0ï¼Œè¡¨ç¤ºè¯¥å…ƒç»„æ˜¯æ— æ•ˆçš„ï¼ˆä¾‹å¦‚ï¼Œå·²ç»è¢«åˆ é™¤æˆ–è€…ä»æœªè¢«åˆå§‹åŒ–ï¼‰ã€‚ <code>HeapFile</code>å¯¹è±¡çš„é¡µæ˜¯<code>HeapPage</code>ç±»å‹ï¼Œå®ç°äº†<code>Page</code>æ¥å£ã€‚é¡µè¢«å­˜å‚¨åœ¨ç¼“å†²æ± ä¸­ï¼Œä½†ç”±<code>HeapFile</code>ç±»æ¥è¯»å†™ã€‚</p>
<p>
<p>SimpleDB stores heap files on disk in more or less the same format they are stored in memory. Each file consists of page data arranged consecutively on disk. Each page consists of one or more bytes representing the header, followed by the _ page size_ bytes of actual page content. Each tuple requires <em>tuple size</em> * 8 bits for its content and 1 bit for the header. Thus, the number of tuples that can fit in a single page is:</p>
<p>SimpleDBåœ¨ç£ç›˜ä¸Šå­˜å‚¨å †æ–‡ä»¶çš„æ ¼å¼æˆ–å¤šæˆ–å°‘ä¸å®ƒä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ ¼å¼ç›¸åŒã€‚æ¯ä¸ªæ–‡ä»¶ç”±ç£ç›˜ä¸Šè¿ç»­æ’åˆ—çš„é¡µé¢æ•°æ®ç»„æˆã€‚æ¯ä¸ªé¡µé¢ç”±ä¸€ä¸ªæˆ–å¤šä¸ªä»£è¡¨å¤´çš„å­—èŠ‚ç»„æˆï¼Œç„¶åæ˜¯å®é™…é¡µé¢å†…å®¹çš„_é¡µé¢å¤§å°_å­—èŠ‚ã€‚æ¯ä¸ªå…ƒç»„çš„å†…å®¹éœ€è¦_å…ƒç»„å¤§å°_*8ä½ï¼Œé¡µçœ‰éœ€è¦1ä½ã€‚å› æ­¤ï¼Œä¸€ä¸ªé¡µé¢ä¸­å¯ä»¥å®¹çº³çš„ tuple æ•°é‡æ˜¯ã€‚</p>
<p>
<p><code>_tuples per page_ = floor((_page size_ * 8) / (_tuple size_ * 8 + 1))</code></p>
<p>
<p>Where <em>tuple size</em> is the size of a tuple in the page in bytes. The idea here is that each tuple requires one additional bit of storage in the header. We compute the number of bits in a page (by mulitplying page size by 8), and divide this quantity by the number of bits in a tuple (including this extra header bit) to get the number of tuples per page. The floor operation rounds down to the nearest integer number of tuples (we don't want to store partial tuples on a page!)</p>
<p>å…¶ä¸­_tuple size_æ˜¯é¡µé¢ä¸­ä¸€ä¸ªå…ƒç»„çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯ï¼Œæ¯ä¸ªå…ƒç»„éœ€è¦åœ¨å¤´ä¸­å¢åŠ ä¸€ä¸ªæ¯”ç‰¹çš„å­˜å‚¨ã€‚æˆ‘ä»¬è®¡ç®—ä¸€ä¸ªé¡µé¢ä¸­çš„æ¯”ç‰¹æ•°ï¼ˆé€šè¿‡å°†é¡µé¢å¤§å°ä¹˜ä»¥8ï¼‰ï¼Œç„¶åç”¨è¿™ä¸ªæ•°é‡é™¤ä»¥å…ƒç»„ä¸­çš„æ¯”ç‰¹æ•°ï¼ˆåŒ…æ‹¬è¿™ä¸ªé¢å¤–çš„å¤´éƒ¨æ¯”ç‰¹ï¼‰ï¼Œå¾—åˆ°æ¯é¡µçš„å…ƒç»„æ•°ã€‚ä¸‹é™æ“ä½œå°†å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„ tuple æ•°ï¼ˆæˆ‘ä»¬ä¸æƒ³åœ¨ä¸€ä¸ªé¡µé¢ä¸Šå­˜å‚¨éƒ¨åˆ† tuple ï¼ï¼‰ã€‚</p>
<p>
<p>Once we know the number of tuples per page, the number of bytes required to store the header is simply:</p>
<p>ä¸€æ—¦æˆ‘ä»¬çŸ¥é“äº†æ¯é¡µçš„ tuple æ•°ï¼Œå­˜å‚¨é¡µçœ‰æ‰€éœ€çš„å­—èŠ‚æ•°å°±ç®€å•äº†ã€‚</p>
<p>
<p><code>headerBytes = ceiling(tupsPerPage/8)</code></p>
<p>
<p>The ceiling operation rounds up to the nearest integer number of bytes (we never store less than a full byte of header information.)</p>
<p>ä¸Šé™æ“ä½œå››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°å­—èŠ‚ï¼ˆæˆ‘ä»¬æ°¸è¿œä¸ä¼šå­˜å‚¨å°‘äºä¸€ä¸ªå®Œæ•´å­—èŠ‚çš„å¤´ä¿¡æ¯ï¼‰ã€‚</p>
<p>
<p>The low (least significant) bits of each byte represents the status of the slots that are earlier in the file. Hence, the lowest bit of the first byte represents whether or not the first slot in the page is in use. The second lowest bit of the first byte represents whether or not the second slot in the page is in use, and so on. Also, note that the high-order bits of the last byte may not correspond to a slot that is actually in the file, since the number of slots may not be a multiple of 8. Also note that all Java virtual machines are <a href="http://en.wikipedia.org/wiki/Endianness">big-endian</a>.</p>
<p>æ¯ä¸ªå­—èŠ‚çš„ä½ä½ï¼ˆæœ€å°æœ‰æ•ˆä½ï¼‰ä»£è¡¨æ–‡ä»¶ä¸­è¾ƒæ—©çš„æ§½ä½çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½ä»£è¡¨é¡µé¢ä¸­çš„ç¬¬ä¸€ä¸ªæ§½æ˜¯å¦æ­£åœ¨ä½¿ç”¨ã€‚ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¬¬äºŒä¸ªæœ€ä½ä½ä»£è¡¨é¡µé¢ä¸­çš„ç¬¬äºŒä¸ªæ§½æ˜¯å¦åœ¨ä½¿ç”¨ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚çš„é«˜é˜¶ä½å¯èƒ½ä¸å¯¹åº”äºæ–‡ä»¶ä¸­å®é™…å­˜åœ¨çš„æ§½ï¼Œå› ä¸ºæ§½çš„æ•°é‡å¯èƒ½ä¸æ˜¯8çš„å€æ•°ã€‚è¿˜è¦æ³¨æ„ï¼Œæ‰€æœ‰çš„Javaè™šæ‹Ÿæœºéƒ½æ˜¯<a href="http://en.wikipedia.org/wiki/Endianness">big-endian</a>ã€‚</p>
<p>
<h3 id="exercise-4"><a class="header" href="#exercise-4">Exercise 4</a></h3>
<p><strong>Implement the skeleton methods in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/storage/HeapPageId.java</li>
<li>src/java/simpledb/storage/RecordId.java</li>
<li>src/java/simpledb/storage/HeapPage.java</li>
</ul>
<hr />
<p>Although you will not use them directly in Lab 1, we ask you to implement <code>getNumEmptySlots()</code> and <code>isSlotUsed()</code> in HeapPage. These require pushing around bits in the page header. You may find it helpful to look at the other methods that have been provided in HeapPage or in <code>src/simpledb/HeapFileEncoder.java</code> to understand the layout of pages.</p>
<p>å°½ç®¡ä½ ä¸ä¼šåœ¨å®éªŒ1ä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œä½†æˆ‘ä»¬è¦æ±‚ä½ åœ¨HeapPageä¸­å®ç°<code>getNumEmptySlots()</code>å’Œ<code>isSlotUsed()</code>ã€‚è¿™äº›éƒ½éœ€è¦åœ¨é¡µå¤´ä¸­æ¨é€ä¸€äº›ä½ã€‚ä½ å¯èƒ½ä¼šå‘ç°æŸ¥çœ‹HeapPageæˆ–<code>src/simpledb/HeapFileEncoder.java</code>ä¸­æä¾›çš„å…¶ä»–æ–¹æ³•å¯¹ç†è§£é¡µé¢çš„å¸ƒå±€æœ‰å¸®åŠ©ã€‚</p>
<p>You will also need to implement an Iterator over the tuples in the page, which may involve an auxiliary class or data structure.</p>
<p>ä½ è¿˜éœ€è¦åœ¨é¡µé¢ä¸­çš„ tuple ä¸Šå®ç°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿™å¯èƒ½æ¶‰åŠä¸€ä¸ªè¾…åŠ©ç±»æˆ–æ•°æ®ç»“æ„ã€‚</p>
<p>At this point, your code should pass the unit tests in HeapPageIdTest, RecordIDTest, and HeapPageReadTest.</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ çš„ä»£ç åº”è¯¥é€šè¿‡HeapPageIdTestã€RecordIDTestå’ŒHeapPageReadTestçš„å•å…ƒæµ‹è¯•ã€‚</p>
<p> 
<p>After you have implemented <code>HeapPage</code>, you will write methods for <code>HeapFile</code> in this lab to calculate the number of pages in a file and to read a page from the file. You will then be able to fetch tuples from a file stored on disk.</p>
<p>åœ¨ä½ å®ç°äº† &quot;HeapPage &quot;ä¹‹åï¼Œä½ å°†åœ¨æœ¬å®éªŒä¸­ä¸º &quot;HeapFile &quot;ç¼–å†™æ–¹æ³•ï¼Œä»¥è®¡ç®—æ–‡ä»¶ä¸­çš„é¡µæ•°ï¼Œå¹¶ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªé¡µã€‚ç„¶åä½ å°†èƒ½å¤Ÿä»å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸­è·å– tuple ã€‚</p>
<h3 id="exercise-5"><a class="header" href="#exercise-5">Exercise 5</a></h3>
<p><strong>Implement the skeleton methods in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/storage/HeapFile.java</li>
</ul>
<hr />
<p>To read a page from disk, you will first need to calculate the correct offset in the file. </p>
<p>è¦ä»ç£ç›˜ä¸Šè¯»å–ä¸€ä¸ªé¡µé¢ï¼Œä½ é¦–å…ˆéœ€è¦è®¡ç®—å‡ºæ–‡ä»¶ä¸­çš„æ­£ç¡®åç§»é‡ã€‚</p>
<p>Hint: you will need random access to the file in order to read and write pages at arbitrary offsets. You should not call BufferPool methods when reading a page from disk.</p>
<p>æç¤ºï¼šä½ éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œéšæœºè®¿é—®ï¼Œä»¥ä¾¿åœ¨ä»»æ„çš„åç§»é‡ä¸Šè¯»å†™é¡µé¢ã€‚å½“ä»ç£ç›˜ä¸Šè¯»å–ä¸€ä¸ªé¡µé¢æ—¶ï¼Œä½ ä¸åº”è¯¥è°ƒç”¨BufferPoolæ–¹æ³•ã€‚</p>
<p> 
<p>You will also need to implement the <code>HeapFile.iterator()</code> method, which should iterate through through the tuples of each page in the HeapFile. The iterator must use the <code>BufferPool.getPage()</code> method to access pages in the <code>HeapFile</code>. This method loads the page into the buffer pool and will eventually be used (in a later lab) to implement locking-based concurrency control and recovery.  Do not load the entire table into memory on the open() call -- this will cause an out of memory error for very large tables.</p>
<p>ä½ è¿˜éœ€è¦å®ç°<code>HeapFile.iterator()</code>æ–¹æ³•ï¼Œå®ƒåº”è¯¥éå†HeapFileä¸­æ¯ä¸ªé¡µé¢çš„ tuple ã€‚è¿­ä»£å™¨å¿…é¡»ä½¿ç”¨<code>BufferPool.getPage()</code>æ–¹æ³•æ¥è®¿é—®<code>HeapFile</code>ä¸­çš„é¡µé¢ã€‚è¿™ä¸ªæ–¹æ³•å°†é¡µé¢åŠ è½½åˆ°ç¼“å†²æ± ä¸­ï¼Œæœ€ç»ˆå°†è¢«ç”¨äºï¼ˆåœ¨åé¢çš„å®éªŒä¸­ï¼‰å®ç°åŸºäºé”çš„å¹¶å‘æ§åˆ¶å’Œæ¢å¤ã€‚ ä¸è¦åœ¨open()è°ƒç”¨æ—¶å°†æ•´ä¸ªè¡¨åŠ è½½åˆ°å†…å­˜ä¸­ -- è¿™å°†å¯¼è‡´éå¸¸å¤§çš„è¡¨å‡ºç°å†…å­˜ä¸è¶³çš„é”™è¯¯ã€‚</p>
<p>
<p>At this point, your code should pass the unit tests in HeapFileReadTest.</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ çš„ä»£ç åº”è¯¥é€šè¿‡HeapFileReadTestçš„å•å…ƒæµ‹è¯•ã€‚</p>
<h3 id="26-operators"><a class="header" href="#26-operators">2.6. Operators</a></h3>
<p>Operators are responsible for the actual execution of the query plan. They implement the operations of the relational algebra. In SimpleDB, operators are iterator based; each operator implements the <code>DbIterator</code> interface.</p>
<p>æ“ä½œå‘˜è´Ÿè´£æŸ¥è¯¢è®¡åˆ’çš„å®é™…æ‰§è¡Œã€‚ä»–ä»¬å®ç°äº†å…³ç³»ä»£æ•°çš„æ“ä½œã€‚åœ¨SimpleDBä¸­ï¼Œæ“ä½œç¬¦æ˜¯åŸºäºè¿­ä»£å™¨çš„ï¼›æ¯ä¸ªæ“ä½œç¬¦å®ç°äº†`DbIterator'æ¥å£ã€‚</p>
<p>
<p>Operators are connected together into a plan by passing lower-level operators into the constructors of higher-level operators, i.e., by 'chaining them together.' Special access method operators at the leaves of the plan are responsible for reading data from the disk (and hence do not have any operators below them).</p>
<p>æ“ä½œç¬¦é€šè¿‡å°†ä½çº§åˆ«çš„æ“ä½œç¬¦ä¼ é€’åˆ°é«˜çº§åˆ«çš„æ“ä½œç¬¦çš„æ„é€ å™¨ä¸­ï¼Œå³é€šè¿‡ &quot;è¿é” &quot;å°†å®ƒä»¬è¿æ¥åˆ°ä¸€ä¸ªè®¡åˆ’ä¸­ã€‚åœ¨è®¡åˆ’å¶å­ä¸Šçš„ç‰¹æ®Šè®¿é—®æ–¹æ³•è¿ç®—ç¬¦è´Ÿè´£ä»ç£ç›˜ä¸Šè¯»å–æ•°æ®ï¼ˆå› æ­¤æ²¡æœ‰ä¸‹é¢çš„ä»»ä½•è¿ç®—ç¬¦ï¼‰ã€‚</p>
<p>
<p>At the top of the plan, the program interacting with SimpleDB simply calls <code>getNext</code> on the root operator; this operator then calls <code>getNext</code> on its children, and so on, until these leaf operators are called. They fetch tuples from disk and pass them up the tree (as return arguments to <code>getNext</code>); tuples propagate up the plan in this way until they are output at the root or combined or rejected by another operator in the plan.</p>
<p>åœ¨è®¡åˆ’çš„é¡¶éƒ¨ï¼Œä¸SimpleDBäº¤äº’çš„ç¨‹åºåªéœ€åœ¨æ ¹æ“ä½œç¬¦ä¸Šè°ƒç”¨<code>getNext</code>ï¼›è¿™ä¸ªæ“ä½œç¬¦æ¥ç€åœ¨å…¶å­æ“ä½œç¬¦ä¸Šè°ƒç”¨<code>getNext</code>ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°è¿™äº›å¶æ“ä½œç¬¦è¢«è°ƒç”¨ã€‚ä»–ä»¬ä»ç£ç›˜ä¸­è·å– tuple ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°æ ‘ä¸Šï¼ˆä½œä¸º<code>getNext</code>çš„è¿”å›å‚æ•°ï¼‰ï¼› tuple ä»¥è¿™ç§æ–¹å¼åœ¨è®¡åˆ’ä¸­ä¼ æ’­ï¼Œç›´åˆ°å®ƒä»¬åœ¨æ ¹éƒ¨è¾“å‡ºæˆ–è¢«è®¡åˆ’ä¸­çš„å¦ä¸€ä¸ªè¿ç®—ç¬¦åˆå¹¶æˆ–æ‹’ç»ã€‚</p>
<p>
<!--

For plans that implement `INSERT` and `DELETE` queries, the top-most operator is a special `Insert` or `Delete` operator that modifies the pages on disk.  These operators return a tuple containing the count of the number of affected tuples to the user-level program.

å¯¹äºå®ç°`INSERT'å’Œ`DELETE'æŸ¥è¯¢çš„è®¡åˆ’ï¼Œæœ€ä¸Šé¢çš„è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„`Insert'æˆ–`Delete'è¿ç®—ç¬¦ï¼Œå®ƒä¿®æ”¹äº†ç£ç›˜ä¸Šçš„é¡µé¢ã€‚ è¿™äº›æ“ä½œç¬¦å‘ç”¨æˆ·çº§ç¨‹åºè¿”å›ä¸€ä¸ªåŒ…å«å—å½±å“ tuple æ•°é‡çš„è®¡æ•°ã€‚

<p>
-->
<p>For this lab, you will only need to implement one SimpleDB operator.</p>
<p>å¯¹äºè¿™ä¸ªå®éªŒï¼Œä½ åªéœ€è¦å®ç°ä¸€ä¸ªSimpleDBæ“ä½œç¬¦ã€‚</p>
<h3 id="exercise-6"><a class="header" href="#exercise-6">Exercise 6.</a></h3>
<p><strong>Implement the skeleton methods in:</strong></p>
<hr />
<ul>
<li>src/java/simpledb/execution/SeqScan.java</li>
</ul>
<hr />
<p>This operator sequentially scans all of the tuples from the pages of the table specified by the <code>tableid</code> in the constructor. This operator should access tuples through the <code>DbFile.iterator()</code> method.</p>
<p>è¿™ä¸ªæ“ä½œè€…ä»æ„é€ å‡½æ•°ä¸­çš„<code>tableid</code>æŒ‡å®šçš„è¡¨ä¸­çš„é¡µé¢ä¸­é¡ºåºæ‰«ææ‰€æœ‰ tuple ã€‚è¿™ä¸ªæ“ä½œç¬¦åº”è¯¥é€šè¿‡<code>DbFile.iterator()</code>æ–¹æ³•è®¿é—® tuple ã€‚</p>
<p>At this point, you should be able to complete the ScanTest system test. Good work!</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥èƒ½å¤Ÿå®ŒæˆScanTestç³»ç»Ÿæµ‹è¯•ã€‚å¹²å¾—å¥½!</p>
<p>You will fill in other operators in subsequent labs.</p>
<p>ä½ å°†åœ¨éšåçš„å®éªŒä¸­å¡«å†™å…¶ä»– operators ã€‚</p>
<p><a name="query_walkthrough"></a></p>
<h3 id="27-a-simple-query"><a class="header" href="#27-a-simple-query">2.7. A simple query</a></h3>
<p>The purpose of this section is to illustrate how these various components are connected together to process a simple query.</p>
<p>æœ¬èŠ‚çš„ç›®çš„æ˜¯è¯´æ˜è¿™äº›ä¸åŒçš„ç»„ä»¶æ˜¯å¦‚ä½•è¿æ¥åœ¨ä¸€èµ·ä»¥å¤„ç†ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢ã€‚</p>
<p>Suppose you have a data file, &quot;some_data_file.txt&quot;, with the following contents:</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œ&quot;some_data_file.txt&quot;ï¼Œå…¶å†…å®¹å¦‚ä¸‹ã€‚</p>
<pre><code>1,1,1
2,2,2 
3,4,4
</code></pre>
<p>
You can convert this into a binary file that SimpleDB can query as follows:
<p>ä½ å¯ä»¥å°†å…¶è½¬æ¢æˆSimpleDBå¯ä»¥æŸ¥è¯¢çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p>
```java -jar dist/simpledb.jar convert some_data_file.txt 3```
<p>
Here, the argument "3" tells conver that the input has 3 columns.
<p>è¿™é‡Œï¼Œå‚æ•° &quot;3 &quot;å‘Šè¯‰Converï¼Œè¾“å…¥æœ‰3åˆ—ã€‚</p>
<p>
The following code implements a simple selection query over this file. This code is equivalent to the SQL statement `SELECT * FROM some_data_file`.
<p>ä¸‹é¢çš„ä»£ç åœ¨è¿™ä¸ªæ–‡ä»¶ä¸Šå®ç°äº†ä¸€ä¸ªç®€å•çš„é€‰æ‹©æŸ¥è¯¢ã€‚è¿™æ®µä»£ç ç­‰åŒäºSQLè¯­å¥<code>SELECT * FROM some_data_file</code>ã€‚</p>
<pre><code>package simpledb;
import java.io.*;

public class test {

    public static void main(String[] argv) {

        // construct a 3-column table schema
        Type types[] = new Type[]{ Type.INT_TYPE, Type.INT_TYPE, Type.INT_TYPE };
        String names[] = new String[]{ &quot;field0&quot;, &quot;field1&quot;, &quot;field2&quot; };
        TupleDesc descriptor = new TupleDesc(types, names);

        // create the table, associate it with some_data_file.dat
        // and tell the catalog about the schema of this table.
        HeapFile table1 = new HeapFile(new File(&quot;some_data_file.dat&quot;), descriptor);
        Database.getCatalog().addTable(table1, &quot;test&quot;);

        // construct the query: we use a simple SeqScan, which spoonfeeds
        // tuples via its iterator.
        TransactionId tid = new TransactionId();
        SeqScan f = new SeqScan(tid, table1.getId());

        try {
            // and run it
            f.open();
            while (f.hasNext()) {
                Tuple tup = f.next();
                System.out.println(tup);
            }
            f.close();
            Database.getBufferPool().transactionComplete(tid);
        } catch (Exception e) {
            System.out.println (&quot;Exception : &quot; + e);
        }
    }

}
</code></pre>
<p>The table we create has three integer fields. To express this, we create a <code>TupleDesc</code> object and pass it an array of <code>Type</code> objects, and optionally an array of <code>String</code> field names. Once we have created this <code>TupleDesc</code>, we initialize a <code>HeapFile</code> object representing the table stored in <code>some_data_file.dat</code>. Once we have created the table, we add it to the catalog. If this were a database server that was already running, we would have this catalog information loaded. We need to load it explicitly to make this code self-contained.</p>
<p>æˆ‘ä»¬åˆ›å»ºçš„è¡¨æœ‰ä¸‰ä¸ªæ•´æ•°å­—æ®µã€‚ä¸ºäº†è¡¨è¾¾è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>TupleDesc</code>å¯¹è±¡ï¼Œå¹¶ä¼ é€’ç»™å®ƒä¸€ä¸ª<code>Type</code>å¯¹è±¡æ•°ç»„ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>String</code>å­—æ®µåæ•°ç»„ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†è¿™ä¸ª<code>TupleDesc</code>ï¼Œæˆ‘ä»¬å°±åˆå§‹åŒ–ä¸€ä¸ª<code>HeapFile</code>å¯¹è±¡ï¼Œä»£è¡¨å­˜å‚¨åœ¨<code>some_data_file.dat</code>çš„è¡¨ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†è¿™ä¸ªè¡¨ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒæ·»åŠ åˆ° catalog ä¸­ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªå·²ç»åœ¨è¿è¡Œçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¼šåŠ è½½è¿™ä¸ª catalog ä¿¡æ¯ã€‚æˆ‘ä»¬éœ€è¦æ˜ç¡®åœ°åŠ è½½å®ƒï¼Œä½¿è¿™æ®µä»£ç è‡ªæˆä¸€ä½“ã€‚</p>
<p>Once we have finished initializing the database system, we create a query plan. Our plan consists only of the <code>SeqScan</code> operator that scans the tuples from disk. In general, these operators are instantiated with references to the appropriate table (in the case of <code>SeqScan</code>) or child operator (in the case of e.g. Filter). The test program then repeatedly calls <code>hasNext</code> and <code>next</code> on the <code>SeqScan</code> operator. As tuples are output from the <code>SeqScan</code>, they are printed out on the command line.</p>
<p>ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†æ•°æ®åº“ç³»ç»Ÿçš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢è®¡åˆ’ã€‚æˆ‘ä»¬çš„è®¡åˆ’åªç”±<code>SeqScan</code>æ“ä½œç¬¦ç»„æˆï¼Œå®ƒä»ç£ç›˜ä¸Šæ‰«æ tuple ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™äº›æ“ä½œç¬¦çš„å®ä¾‹åŒ–éœ€è¦å¼•ç”¨ç›¸åº”çš„è¡¨ï¼ˆåœ¨<code>SeqScan</code>çš„æƒ…å†µä¸‹ï¼‰æˆ–å­æ“ä½œç¬¦ï¼ˆåœ¨ä¾‹å¦‚Filterçš„æƒ…å†µä¸‹ï¼‰ã€‚ç„¶åæµ‹è¯•ç¨‹åºåœ¨<code>SeqScan</code>è¿ç®—ç¬¦ä¸Šåå¤è°ƒç”¨<code>hasNext</code>å’Œ<code>next</code>ã€‚å½“ tuple ä»<code>SeqScan</code>ä¸­è¾“å‡ºæ—¶ï¼Œå®ƒä»¬ä¼šåœ¨å‘½ä»¤è¡Œä¸­æ‰“å°å‡ºæ¥ã€‚</p>
<p>We <strong>strongly recommend</strong> you try this out as a fun end-to-end test that will help you get experience writing your own test programs for simpledb. You should create the file &quot;test.java&quot; in the src/java/simpledb directory with the code above,  and you should add some &quot;import&quot; statement above the code,  and place the <code>some_data_file.dat</code> file in the top level directory. Then run:</p>
<p>æˆ‘ä»¬***å¼ºçƒˆå»ºè®®ä½ å°è¯•ä¸€ä¸‹ï¼Œä½œä¸ºä¸€ä¸ªæœ‰è¶£çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œå®ƒå°†å¸®åŠ©ä½ è·å¾—ä¸ºsimpledbç¼–å†™è‡ªå·±çš„æµ‹è¯•ç¨‹åºçš„ç»éªŒã€‚ä½ åº”è¯¥åœ¨ src/java/simpledb  catalog ä¸­ç”¨ä¸Šé¢çš„ä»£ç åˆ›å»º &quot;test.java &quot;æ–‡ä»¶ï¼Œä½ åº”è¯¥åœ¨ä»£ç ä¸Šæ–¹æ·»åŠ ä¸€äº› &quot;import &quot;è¯­å¥ï¼Œå¹¶å°† <code>some_data_file.dat</code>æ–‡ä»¶æ”¾åœ¨é¡¶å±‚ catalog ä¸­ã€‚ç„¶åè¿è¡Œ</p>
<pre><code>ant
java -classpath dist/simpledb.jar simpledb.test
</code></pre>
<p>Note that <code>ant</code> compiles <code>test.java</code> and generates a new jarfile that contains it.</p>
<p>æ³¨æ„ï¼Œ<code>ant</code>ç¼–è¯‘<code>test.java</code>å¹¶ç”Ÿæˆä¸€ä¸ªåŒ…å«å®ƒçš„æ–°jarfileã€‚</p>
<h2 id="3-logistics"><a class="header" href="#3-logistics">3. Logistics</a></h2>
<p>You must submit your code (see below) as well as a short (2 pages, maximum) writeup describing your approach. This writeup should:</p>
<p>ä½ å¿…é¡»æäº¤ä½ çš„ä»£ç ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œä»¥åŠæè¿°ä½ çš„æ–¹æ³•çš„ç®€çŸ­ï¼ˆæœ€å¤šä¸¤é¡µï¼‰çš„æ–‡ç« ã€‚è¿™ç¯‡æŠ¥å‘Šåº”è¯¥</p>
<ul>
<li>
<p>Describe any design decisions you made. These may be minimal for Lab 1.</p>
</li>
<li>
<p>Discuss and justify any changes you made to the API.</p>
</li>
<li>
<p>Describe any missing or incomplete elements of your code.</p>
</li>
<li>
<p>Describe how long you spent on the lab, and whether there was anything you found particularly difficult or confusing.</p>
</li>
<li>
<p>æè¿°ä½ åšå‡ºçš„ä»»ä½•è®¾è®¡å†³å®šã€‚è¿™äº›å¯èƒ½æ˜¯å®éªŒ1çš„æœ€ä½é™åº¦ã€‚</p>
</li>
<li>
<p>è®¨è®ºå¹¶è®ºè¯ä½ å¯¹APIæ‰€åšçš„ä»»ä½•ä¿®æ”¹ã€‚</p>
</li>
<li>
<p>æè¿°ä½ çš„ä»£ç ä¸­ä»»ä½•ç¼ºå¤±æˆ–ä¸å®Œæ•´çš„å…ƒç´ ã€‚</p>
</li>
<li>
<p>æè¿°ä½ èŠ±äº†å¤šé•¿æ—¶é—´åšè¿™ä¸ªå®éªŒï¼Œä»¥åŠæ˜¯å¦æœ‰ä»»ä½•ä½ è®¤ä¸ºç‰¹åˆ«å›°éš¾æˆ–å›°æƒ‘çš„äº‹æƒ…ã€‚</p>
</li>
</ul>
<h3 id="31-collaboration"><a class="header" href="#31-collaboration">3.1. Collaboration</a></h3>
<p>This lab should be manageable for a single person, but if you prefer to work with a partner, this is also OK. Larger groups are not allowed. Please indicate clearly who you worked with, if anyone, on your individual writeup.</p>
<p>è¿™ä¸ªå®éªŒå¯¹ä¸€ä¸ªäººæ¥è¯´åº”è¯¥æ˜¯å¯ä»¥åº”ä»˜çš„ï¼Œä½†å¦‚æœä½ å–œæ¬¢å’Œä¸€ä¸ªä¼™ä¼´ä¸€èµ·å·¥ä½œï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸å…è®¸æœ‰è¾ƒå¤§çš„å›¢ä½“ã€‚å¦‚æœæœ‰çš„è¯ï¼Œè¯·åœ¨ä½ çš„ä¸ªäººæŠ¥å‘Šä¸­æ˜ç¡®æŒ‡å‡ºä½ å’Œè°ä¸€èµ·å·¥ä½œã€‚</p>
<h3 id="32-submitting-your-assignment"><a class="header" href="#32-submitting-your-assignment">3.2. Submitting your assignment</a></h3>
<!--

To submit your code, please create a `6.830-lab1.tar.gz` tarball (such that, untarred, it creates a `6.830-lab1/src/simpledb` directory with your code) and submit it on the [6.830 Stellar Site](https://stellar.mit.edu/S/course/6/sp13/6.830/index.html). You can use the `ant handin` target to generate the tarball.

è¦æäº¤ä½ çš„ä»£ç ï¼Œè¯·åˆ›å»ºä¸€ä¸ª`6.830-lab1.tar.gz`çš„å‹ç¼©åŒ…ï¼ˆè¿™æ ·ï¼Œæœªç»å‹ç¼©çš„å‹ç¼©åŒ…ä¼šåˆ›å»ºä¸€ä¸ª`6.830-lab1/src/simpledb` catalog ï¼Œé‡Œé¢æœ‰ä½ çš„ä»£ç ï¼‰ï¼Œå¹¶æäº¤åˆ°[6.830 Stellar Site]ï¼ˆhttps://stellar.mit.edu/S/course/6/sp13/6.830/index.htmlï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨`ant handin`ç›®æ ‡æ¥ç”Ÿæˆtarballã€‚
-->
<p>We will be using gradescope to autograde all programming assignments. You should have all been invited to the class instance; if not, please check piazza for an invite code. If you are still having trouble, let us know and we can help you set up. You may submit your code multiple times before the deadline; we will use the latest version as determined by gradescope. Place the write-up in a file called lab1-writeup.txt with your submission. You also need to explicitly add any other files you create, such as new *.java files.</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨gradescopeå¯¹æ‰€æœ‰ç¼–ç¨‹ä½œä¸šè¿›è¡Œè‡ªåŠ¨è¯„åˆ†ã€‚ä½ ä»¬åº”è¯¥éƒ½è¢«é‚€è¯·åˆ°ç­çº§å®ä¾‹ä¸­å»äº†ï¼›å¦‚æœæ²¡æœ‰ï¼Œè¯·åœ¨piazzaä¸ŠæŸ¥è¯¢é‚€è¯·ç ã€‚å¦‚æœä½ ä»ç„¶æœ‰é—®é¢˜ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¸®åŠ©ä½ è®¾ç½®ã€‚ä½ å¯ä»¥åœ¨æˆªæ­¢æ—¥æœŸå‰å¤šæ¬¡æäº¤ä½ çš„ä»£ç ï¼›æˆ‘ä»¬å°†ä½¿ç”¨ç”±gradescopeç¡®å®šçš„æœ€æ–°ç‰ˆæœ¬ã€‚æŠŠå†™å¥½çš„ä¸œè¥¿æ”¾åœ¨ä¸€ä¸ªå«lab1-writeup.txtçš„æ–‡ä»¶é‡Œï¼Œå’Œä½ çš„æäº¤ä¸€èµ·ã€‚ä½ è¿˜éœ€è¦æ˜ç¡®åœ°æ·»åŠ ä½ åˆ›å»ºçš„ä»»ä½•å…¶ä»–æ–‡ä»¶ï¼Œå¦‚æ–°çš„*.javaæ–‡ä»¶ã€‚</p>
<p>The easiest way to submit to gradescope is with <code>.zip</code> files containing your code. On Linux/MacOS, you can do so by running the following command:</p>
<p>å‘ gradescope æäº¤çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨åŒ…å«ä½ çš„ä»£ç çš„ <code>.zip</code> æ–‡ä»¶ã€‚åœ¨Linux/MacOSä¸Šï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®ç°ã€‚</p>
<pre><code class="language-bash">$ zip -r submission.zip src/ lab1-writeup.txt
</code></pre>
<h3 id="33-submitting-a-bug"><a class="header" href="#33-submitting-a-bug">3.3. Submitting a bug</a></h3>
<p>Please submit (friendly!) bug reports to <a href="mailto:6.830-staff@mit.edu">6.830-staff@mit.edu</a>. When you do, please try to include:</p>
<p>è¯·æäº¤ï¼ˆå‹å¥½çš„ï¼ï¼‰é”™è¯¯æŠ¥å‘Šåˆ°<a href="mailto:6.830-staff@mit.edu">6.830-staff@mit.edu</a>ã€‚å½“ä½ è¿™æ ·åšæ—¶ï¼Œè¯·å°½é‡åŒ…æ‹¬ã€‚</p>
<ul>
<li>
<p>A description of the bug.</p>
</li>
<li>
<p>A .java file we can drop in the test/simpledb directory, compile, and run.</p>
</li>
<li>
<p>A .txt file with the data that reproduces the bug. We should be able to convert it to a .dat file using
HeapFileEncoder.</p>
</li>
<li>
<p>ä¸€ä¸ªå…³äºè¯¥é”™è¯¯çš„æè¿°ã€‚</p>
</li>
<li>
<p>ä¸€ä¸ª.javaæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¾åˆ°test/simpledb catalog ä¸­ï¼Œç¼–è¯‘å¹¶è¿è¡Œã€‚</p>
</li>
<li>
<p>ä¸€ä¸ªå¸¦æœ‰å†ç°è¯¥é”™è¯¯çš„æ•°æ®çš„.txtæ–‡ä»¶ã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿä½¿ç”¨HeapFileEncoderå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª.datæ–‡ä»¶ã€‚
HeapFileEncoder.</p>
</li>
</ul>
<p>If you are the first person to report a particular bug in the code, we will give you a candy bar!</p>
<p>å¦‚æœä½ æ˜¯ç¬¬ä¸€ä¸ªæŠ¥å‘Šä»£ç ä¸­æŸä¸€ç‰¹å®šé”™è¯¯çš„äººï¼Œæˆ‘ä»¬å°†ç»™ä½ ä¸€ä¸ªç³–æœæ£’!</p>
<!--The latest bug reports/fixes can be found [here](bugs.html).-->
<p><a name="grading"></a></p>
<h3 id="34-grading"><a class="header" href="#34-grading">3.4 Grading</a></h3>
<p>
<p>75% of your grade will be based on whether or not your code passes the system test suite we will run over it. </p>
<p>ä½ çš„æˆç»©çš„75%å°†åŸºäºä½ çš„ä»£ç æ˜¯å¦é€šè¿‡æˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œçš„ç³»ç»Ÿæµ‹è¯•å¥—ä»¶ã€‚</p>
<p>These tests will be a superset of the tests we have provided. Before handing in your code, you should make sure it produces no errors (passes all of the tests) from both  <code>ant test</code> and <code>ant systemtest</code>.</p>
<p>è¿™äº›æµ‹è¯•å°†æ˜¯æˆ‘ä»¬æä¾›çš„æµ‹è¯•çš„è¶…é›†ã€‚åœ¨æäº¤ä½ çš„ä»£ç ä¹‹å‰ï¼Œä½ åº”è¯¥ç¡®ä¿å®ƒåœ¨<code>ant test</code>å’Œ<code>ant systemtest</code>ä¸­æ²¡æœ‰äº§ç”Ÿé”™è¯¯ï¼ˆé€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ï¼‰ã€‚</p>
<p><strong>Important:</strong> before testing, gradescope will replace your <code>build.xml</code> and the entire contents of the <code>test</code> directory with our version of these files. This means you cannot change the format of <code>.dat</code> files!  You should also be careful changing our APIs. You should test that your code compiles the unmodified tests.</p>
<p>**é‡è¦çš„æ˜¯ï¼š**åœ¨æµ‹è¯•ä¹‹å‰ï¼Œgradescopeå°†ç”¨æˆ‘ä»¬çš„è¿™äº›æ–‡ä»¶çš„ç‰ˆæœ¬æ›¿æ¢ä½ çš„<code>build.xml</code>å’Œ<code>test</code> catalog ä¸­çš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½æ”¹å˜<code>.dat</code>æ–‡ä»¶çš„æ ¼å¼!  ä½ ä¹Ÿåº”è¯¥å°å¿ƒæ”¹å˜æˆ‘ä»¬çš„APIã€‚ä½ åº”è¯¥æµ‹è¯•ä½ çš„ä»£ç æ˜¯å¦èƒ½ç¼–è¯‘æœªä¿®æ”¹çš„æµ‹è¯•ã€‚</p>
<p>You should get immediate feedback and error outputs for failed tests (if any) from gradescope after submission. The score given will be your grade for the autograded portion of the assignment. An additional 25% of your grade will be based on the quality of your writeup and our subjective evaluation of your code. This part will also be published on gradescope after we finish grading your assignment.</p>
<p>åœ¨æäº¤åï¼Œä½ åº”è¯¥ä»gradescopeè·å¾—å³æ—¶åé¦ˆå’Œå¤±è´¥æµ‹è¯•çš„é”™è¯¯è¾“å‡ºï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚ç»™å‡ºçš„åˆ†æ•°å°†æ˜¯ä½ åœ¨ä½œä¸šçš„è‡ªåŠ¨è¯„åˆ†éƒ¨åˆ†çš„æˆç»©ã€‚å¦å¤–25%çš„åˆ†æ•°å°†åŸºäºä½ çš„å†™ä½œè´¨é‡å’Œæˆ‘ä»¬å¯¹ä½ ä»£ç çš„ä¸»è§‚è¯„ä»·ã€‚è¿™ä¸€éƒ¨åˆ†ä¹Ÿå°†åœ¨æˆ‘ä»¬å®Œæˆä½œä¸šè¯„åˆ†åå…¬å¸ƒåœ¨gradescopeä¸Šã€‚</p>
<p>We had a lot of fun designing this assignment, and we hope you enjoy hacking on it!</p>
<p>æˆ‘ä»¬åœ¨è®¾è®¡è¿™é¡¹ä»»åŠ¡æ—¶æœ‰å¾ˆå¤šä¹è¶£ï¼Œæˆ‘ä»¬å¸Œæœ›ä½ å–œæ¬¢åœ¨è¿™ä¸Šé¢ hackingã€‚</p>

                    <div id="giscus-container"></div>
                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    <a rel="prev" href="../../6.830/ans/7-lab6-ans.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../6.830/cn/3-lab2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="../../6.830/ans/7-lab6-ans.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="../../6.830/cn/3-lab2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
        </nav>

    </div>




    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../book.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        var pagePath = "6.830/cn/2-lab1.md"
    </script>


    <!-- Custom JS scripts -->


</body>
</html>