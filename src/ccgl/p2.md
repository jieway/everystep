
使用 ISO 标准 C++ 意味着应该尽可能地使用 C++ 标准库和语言特性，而不是依赖于特定编译器或平台的扩展。这样可以提高代码的可移植性，使得代码能在不同的编译器和平台上编译和运行。


### 如何使用标准库之外的代码？

在编程中，扩展通常指的是超出编程语言标准定义的功能或特性。这些扩展可能是由特定的编译器、操作系统或库提供的。虽然扩展可以提供强大的功能，但它们的使用通常会降低代码的可移植性，因为不同的环境可能不支持同样的扩展。

在某些情况下，使用扩展是必要的，例如，当需要访问特定的系统资源时。在这种情况下，建议将扩展的使用局部化，即只在需要的地方使用扩展，而不是在整个代码库中广泛使用。这样可以降低扩展对代码可移植性的影响。

此外，建议通过非核心编码指南来控制扩展的使用。这意味着，你应该在你的编码指南中明确规定何时和如何使用扩展，以确保它们的使用是一致和可控的。

如果可能，建议构建封装扩展的接口。这样，如果在某个环境中不支持这些扩展，你可以简单地关闭或编译掉这些接口，而不需要修改使用这些接口的代码。这可以进一步提高代码的可移植性。

需要注意的是，扩展通常没有严格定义的语义。即使是那些被多个编译器实现的常见扩展，也可能在行为和边缘情况的处理上有所不同，因为它们没有严格的标准定义。因此，如果过度依赖这些扩展，你的代码的可移植性可能会受到影响。

### 一些例子

在编程中，可移植性是指代码能在不同的环境（例如，不同的操作系统或硬件）中运行。虽然使用有效的 ISO C++ 可以提高代码的可移植性，但并不能保证可移植性。这是因为有些代码可能依赖于未定义行为或实现定义的行为。未定义行为是指标准没有规定的行为，例如，表达式的求值顺序。实现定义的行为是指由编译器或运行时环境决定的行为，例如，`sizeof(int)`的结果。这些行为可能在不同的环境中有不同的结果，因此可能会影响代码的可移植性。

在某些环境中，可能需要限制使用某些 C++ 语言或库特性。例如，在飞机控制软件中，可能需要避免使用动态内存分配，因为这可能会导致内存耗尽或碎片化。在这种情况下，可以使用编码指南的扩展来控制这些特性的使用。这些扩展是针对特定环境定制的，可以帮助开发者避免使用可能导致问题的特性。

为了提高代码的可移植性和正确性，建议使用最新的 C++ 编译器（当前为 C++20 或 C++17），并使用一组不接受扩展的选项。这样，编译器会强制你只使用标准的 C++ 特性，从而避免依赖于特定环境的行为。同时，使用最新的编译器可以让你利用 C++ 的最新特性，这些特性通常会使代码更简洁，更易于理解，也更不容易出错。