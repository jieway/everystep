
### <a name="Ri-ensures"></a>I.8: 优先使用 `Ensures()` 来表达后条件

##### 理由

清晰地表明这个条件是一个后条件，并便于工具的利用。

##### 示例

    void f()
    {
        char buffer[MAX];
        // ...
        memset(buffer, 0, MAX);
        Ensures(buffer[0] == 0);
    }

##### 注解

后条件是可以用许多方式来说明的，包括代码注释，`if` 语句，以及 `assert()`。
这些方式使其难于与普通代码之间进行区分，难于进行更新，难于利用工具来操作，而且可能具有错误的语义。

**替代方案**: 如“这个资源必须被释放”这样形式的后条件最好以 [RAII](#Rr-raii) 的方式来表达。

##### 注释

理想情况下，`Ensures` 应当是接口的一部分，但我们无法轻易做到这点。
当前，我们将之放入定义式（函数体）之中。
一旦语言支持变为可用（例如，参见[契约提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0380r1.pdf)），我们就将会采用前条件，后条件和断言的标准版本。

##### 强制实施

【无法强制实施】 要把各种对后条件进行断言的方式都找出来是不可行的。对那些易于识别的（如 `assert()`）实例给出警告的做法，其意义在缺少语言设施的前提下是有问题的。
